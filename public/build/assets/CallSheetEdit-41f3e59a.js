import{q as u,r,R as F,j as e,y as i}from"./app-968085fd.js";import{A as q}from"./AuthenticatedLayout-4f11e684.js";import{C as o}from"./CardContainer-3fff5ae6.js";import{S as d}from"./SecondaryButton-1ee136e4.js";import{F as G}from"./index.es-3e6cee57.js";import{g as H,h,i as K,j as V}from"./index-f033c28d.js";import{S as W,C as J,L as Q}from"./SlideUpModal-c595e618.js";import{P as X}from"./PortalLayout-8556d041.js";import{P as m}from"./ProjectNavigation-c8d4cccd.js";import Z from"./NewLocationForm-02b6d06d.js";import{S as $,O as p}from"./Option-68e62e81.js";import{T as ee}from"./Textarea-e1ab5a14.js";import{T as te}from"./Typography-a41e099d.js";import"./useSlot-e00659a1.js";import"./createSvgIcon-cb2127eb.js";import"./ListItemButton-9e7b24bd.js";import"./emotion-react.browser.esm-5cf38407.js";import"./CircularButton-5433ef48.js";import"./PrimaryButton-1ff472a9.js";import"./Tooltip-37a15d1f.js";import"./RightPanel-0eceaab0.js";import"./Input-271e9293.js";import"./isMuiElement-8221bc9b.js";function be({auth:j}){const{project:a}=u().props,{callSheet:t}=u().props,{locations:g}=u().props,[v,y]=r.useState(t.status||"Draft"),[c,N]=F.useState(""),n=400,C=n-c.length;r.useState(null);const[x,w]=r.useState(!1),f=()=>{console.log("click"),w(!x)};r.useState({callSheetID:t.id||"",callSheetTitle:t.callSheetTitle||"",callSheetDate:t.callSheetDate||"",bulletin:t.bulletin||""}),console.log(g);const b={showGreeting:!0,size:"page-banner"},D=[{icon:K,onClick:()=>{},isActive:!0},{icon:h,onClick:()=>{},isActive:!1},{icon:V,onClick:()=>{k()},isActive:!1}],[P,S]=r.useState(!1),T=()=>{S(!1)},k=()=>{S(!0)};function A(l){const s={weekday:"short",year:"numeric",month:"long",day:"numeric"};return new Date(l).toLocaleDateString(void 0,s)}const B=t,E=t.callSheetTitle,I="Send Call Sheet",R="Create a New Call Sheet",O="../../images/svg_images/undraw_call_sheets_1.svg",L=route("projects.callSheets.index",{id:a.id}),U=l=>{const s={...t,status:l};i.patch(route("projects.callSheets.update",{id:a.id,callSheetId:t.id}),s,{onSuccess:()=>{console.log("Call sheet status updated successfully",l),i.get(route("projects.callSheets.edit",{id:a.id,callSheetId:t.id}))},onError:Y=>{console.error("Error updating call sheet status:",Y)}})},z=()=>{const l={...t,bulletin:c};i.patch(route("projects.callSheets.update",{id:a.id,callSheetId:t.id}),l,{onSuccess:()=>{console.log("Call sheet bulletin saved successfully",c),i.get(route("projects.callSheets.edit",{id:a.id,callSheetId:t.id}))},onError:s=>{console.error("Error saving call sheet bulletin:",s)}})},_=l=>{y(l),U(l)},M=()=>{console.log("Save!!"),z()};return e.jsx(q,{user:j.user,project:a,bannerProps:b,children:{surface:e.jsxs("div",{className:"relative z-50 w-full h-full",children:[e.jsx(W,{isOpen:P,onClose:T,children:e.jsx(J,{})}),e.jsx(Z,{isRightPanelOpen:x,toggleRightPanel:f,callSheet:t,project:a})]}),portalBody:e.jsx("div",{className:"w-full h-full",children:e.jsx(X,{backButtonHref:L,hasData:B,toolbarTitle:E,toolbarCTAText:I,buttonText:R,customSvgPath:O,actionButtons:D,handleSecondaryButtonClick:M,secondary_cta_text:"save",children:{middle:e.jsxs($,{value:v,className:"w-[18rem]",required:!0,onChange:(l,s)=>{_(s)},children:[e.jsx(p,{value:"Draft",children:"Set Status to: Draft"}),e.jsx(p,{value:"Publish",children:"Set Status to: Publish"}),e.jsx(p,{value:"Unpublish",children:"Set Status to: Unpublish"})]}),content:e.jsxs("div",{className:"flex flex-row gap-4 w-full h-full",children:[e.jsx("div",{className:"row-1 w-full left-col-content",children:e.jsxs(o,{className:"h-full flex flex-col",header:"Production and Location Details",children:[e.jsx("div",{className:"production-date",children:e.jsxs("div",{className:"text-2xl primary-color font-semibold",children:[e.jsx(G,{icon:H,className:"mr-4 primary-green-color"}),A(t.callSheetDate)]})}),location?e.jsx("div",{className:"location-exists-div",children:location.name}):e.jsxs("div",{className:"empty-location text-center m-auto",children:[e.jsx("p",{className:"secondary-color text-lg w-2/3 mx-auto mb-4",children:"You have not entered a location yet. Click here to add a location for your production"}),e.jsx(d,{onClick:f,children:"Add a location"})]})]})}),e.jsxs("div",{className:"row-2 w-[155rem]  enter-col-content flex flex-col gap-4 h-full",children:[e.jsx(o,{className:"h-[20rem]",header:"Bulletin",children:e.jsx(ee,{name:"Soft",size:"sm",variant:"soft",minRows:5.6,maxRows:6,defaultValue:t.bulletin,placeholder:"Type anythingâ€¦",maxLength:n,onKeyDown:l=>{l.key==="Enter"&&l.preventDefault()},onChange:l=>{l.target.value.length<=n&&N(l.target.value)},endDecorator:e.jsxs(te,{level:"body-xs",sx:{ml:"auto"},children:[c.length," / ",n," character(s) (",C," remaining)"]})})}),e.jsxs(o,{className:"h-full flex flex-col",header:"Recipients",children:[e.jsxs("div",{className:"rsvp-overview",children:[e.jsx(Q,{determinate:!0,value:75,color:"success",variant:"soft"}),e.jsxs("div",{className:"recipient-overview flex flex-row gap-6 mt-8",children:[e.jsx(m,{icon:h,size:"small"}),"Clients",e.jsx(m,{icon:h,size:"small"}),"Crew",e.jsx(m,{icon:h,size:"small"}),"Talent"]})]}),e.jsxs("div",{className:"empty-location text-center m-auto",children:[e.jsx("p",{className:"secondary-color text-lg w-2/3 mx-auto mb-4",children:"You have not added a recipient yet. Click here to add a recipient for your production"}),e.jsx(d,{children:"Add a recipient"})]})]})]}),e.jsxs("div",{className:"row-3 w-full right-col-content flex flex-col gap-4 h-full",children:[e.jsxs("div",{className:"flex flex-row gap-4 h-[12rem]",children:[e.jsx(o,{className:"h-full"}),e.jsx(o,{className:"h-full"})]}),e.jsxs("div",{className:"flex flex-col gap-4 h-full",children:[e.jsx(o,{className:"h-full flex flex-col",header:"Production Schedule",children:e.jsxs("div",{className:"empty-location text-center m-auto",children:[e.jsx("p",{className:"secondary-color text-lg w-2/3 mx-auto mb-4",children:"You have not entered a production schedule yet. Click here to add a schedule for your production"}),e.jsx(d,{children:"Add a production schedule"})]})}),e.jsx(o,{className:"h-full flex flex-col max-h-[14rem] ",header:"Atmosphere",children:e.jsxs("div",{className:"empty-location text-center m-auto",children:[e.jsx("p",{className:"secondary-color text-lg w-2/3 mx-auto mb-4",children:"You have not entered a atmosphere yet. Click here to add a atmosphere for your production"}),e.jsx(d,{children:"Add an atmosphere"})]})})]})]})]})}})})}})}export{be as default};
