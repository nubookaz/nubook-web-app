import{_ as M,a as s}from"./toPropertyKey-0671445a.js";import{r as v,j as T}from"./app-d6201cb1.js";import{b as ne,a as ie,g as se,s as B,u as le,c as $,h as O,d as de}from"./useSlot-958e930c.js";import{u as ce}from"./useForwardedInput-ffe731dd.js";import{o as N,d as ue}from"./ownerWindow-8eff4865.js";import{u as j}from"./useEnhancedEffect-8ef057d9.js";const pe=["onChange","maxRows","minRows","style","value"];function _(r){return parseInt(r,10)||0}const xe={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function ve(r){return r==null||Object.keys(r).length===0||r.outerHeightStyle===0&&!r.overflowing}const he=v.forwardRef(function(e,c){const{onChange:l,maxRows:t,minRows:n=1,style:h,value:u}=e,p=M(e,pe),{current:H}=v.useRef(u!=null),g=v.useRef(null),S=ne(c,g),y=v.useRef(null),C=v.useCallback(()=>{const o=g.current,a=N(o).getComputedStyle(o);if(a.width==="0px")return{outerHeightStyle:0,overflowing:!1};const i=y.current;i.style.width=a.width,i.value=o.value||e.placeholder||"x",i.value.slice(-1)===`
`&&(i.value+=" ");const b=a.boxSizing,x=_(a.paddingBottom)+_(a.paddingTop),W=_(a.borderBottomWidth)+_(a.borderTopWidth),k=i.scrollHeight;i.value="x";const z=i.scrollHeight;let d=k;n&&(d=Math.max(Number(n)*z,d)),t&&(d=Math.min(Number(t)*z,d)),d=Math.max(d,z);const w=d+(b==="border-box"?x+W:0),E=Math.abs(d-k)<=1;return{outerHeightStyle:w,overflowing:E}},[t,n,e.placeholder]),f=v.useCallback(()=>{const o=C();if(ve(o))return;const m=g.current;m.style.height=`${o.outerHeightStyle}px`,m.style.overflow=o.overflowing?"hidden":""},[C]);j(()=>{const o=()=>{f()};let m;const a=ue(o),i=g.current,b=N(i);b.addEventListener("resize",a);let x;return typeof ResizeObserver<"u"&&(x=new ResizeObserver(o),x.observe(i)),()=>{a.clear(),cancelAnimationFrame(m),b.removeEventListener("resize",a),x&&x.disconnect()}},[C,f]),j(()=>{f()});const P=o=>{H||f(),l&&l(o)};return T.jsxs(v.Fragment,{children:[T.jsx("textarea",s({value:u,onChange:P,ref:S,rows:n},p)),T.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:y,tabIndex:-1,style:s({},xe.shadow,h,{paddingTop:0,paddingBottom:0})})]})});function ge(r){return se("MuiTextarea",r)}const me=ie("MuiTextarea",["root","textarea","startDecorator","endDecorator","formControl","disabled","error","focused","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft"]),J=me,Te=["propsToForward","rootStateClasses","inputStateClasses","getRootProps","getInputProps","formControl","focused","error","disabled","size","color","variant","startDecorator","endDecorator","minRows","maxRows","component","slots","slotProps"],fe=r=>{const{disabled:e,variant:c,color:l,size:t}=r,n={root:["root",e&&"disabled",c&&`variant${O(c)}`,l&&`color${O(l)}`,t&&`size${O(t)}`],textarea:["textarea"],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return de(n,ge,{})},be=B("div",{name:"JoyTextarea",slot:"Root",overridesResolver:(r,e)=>e.root})(({theme:r,ownerState:e})=>{var c,l,t,n,h,u;const p=(c=r.variants[`${e.variant}`])==null?void 0:c[e.color];return[s({"--Textarea-radius":r.vars.radius.sm,"--Textarea-gap":"0.5rem","--Textarea-placeholderColor":"inherit","--Textarea-placeholderOpacity":.64,"--Textarea-decoratorColor":r.vars.palette.text.icon,"--Textarea-focused":"0","--Textarea-focusedThickness":r.vars.focus.thickness,"--Textarea-focusedHighlight":(l=r.vars.palette[e.color==="neutral"?"primary":e.color])==null?void 0:l[500],'&:not([data-inverted-colors="false"])':s({},e.instanceColor&&{"--_Textarea-focusedHighlight":(t=r.vars.palette[e.instanceColor==="neutral"?"primary":e.instanceColor])==null?void 0:t[500]},{"--Textarea-focusedHighlight":`var(--_Textarea-focusedHighlight, ${r.vars.palette.focusVisible})`})},e.size==="sm"&&{"--Textarea-minHeight":"2rem","--Textarea-paddingBlock":"calc(0.375rem - 0.5px - var(--variant-borderWidth, 0px))","--Textarea-paddingInline":"0.5rem","--Textarea-decoratorChildHeight":"min(1.5rem, var(--Textarea-minHeight))","--Icon-fontSize":r.vars.fontSize.xl},e.size==="md"&&{"--Textarea-minHeight":"2.25rem","--Textarea-paddingBlock":"calc(0.375rem - var(--variant-borderWidth, 0px))","--Textarea-paddingInline":"0.75rem","--Textarea-decoratorChildHeight":"min(1.75rem, var(--Textarea-minHeight))","--Icon-fontSize":r.vars.fontSize.xl2},e.size==="lg"&&{"--Textarea-minHeight":"3rem","--Textarea-paddingBlock":"calc(0.75rem - var(--variant-borderWidth, 0px))","--Textarea-paddingInline":"1rem","--Textarea-gap":"0.75rem","--Textarea-decoratorChildHeight":"min(2.375rem, var(--Textarea-minHeight))","--Icon-fontSize":r.vars.fontSize.xl2},{"--_Textarea-paddingBlock":"max((var(--Textarea-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Textarea-decoratorChildHeight)) / 2, 0px)","--Textarea-decoratorChildRadius":"max(var(--Textarea-radius) - var(--variant-borderWidth, 0px) - var(--_Textarea-paddingBlock), min(var(--_Textarea-paddingBlock) + var(--variant-borderWidth, 0px), var(--Textarea-radius) / 2))","--Button-minHeight":"var(--Textarea-decoratorChildHeight)","--Button-paddingBlock":"0px","--IconButton-size":"var(--Textarea-decoratorChildHeight)","--Button-radius":"var(--Textarea-decoratorChildRadius)","--IconButton-radius":"var(--Textarea-decoratorChildRadius)",boxSizing:"border-box"},e.variant!=="plain"&&{boxShadow:r.shadow.xs},{minWidth:0,minHeight:"var(--Textarea-minHeight)",cursor:"text",position:"relative",display:"flex",flexDirection:"column",paddingInlineStart:"var(--Textarea-paddingInline)",paddingBlock:"var(--Textarea-paddingBlock)",borderRadius:"var(--Textarea-radius)"},r.typography[`body-${e.size}`],p,{backgroundColor:(n=p==null?void 0:p.backgroundColor)!=null?n:r.vars.palette.background.surface,"&::before":{boxSizing:"border-box",content:'""',display:"block",position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,zIndex:1,borderRadius:"inherit",margin:"calc(var(--variant-borderWidth, 0px) * -1)",boxShadow:"var(--Textarea-focusedInset, inset) 0 0 0 calc(var(--Textarea-focused) * var(--Textarea-focusedThickness)) var(--Textarea-focusedHighlight)"}}),{"&:hover":s({},(h=r.variants[`${e.variant}Hover`])==null?void 0:h[e.color],{backgroundColor:null,cursor:"text"}),[`&.${J.disabled}`]:(u=r.variants[`${e.variant}Disabled`])==null?void 0:u[e.color],"&:focus-within::before":{"--Textarea-focused":"1"}}]}),ye=B(he,{name:"JoyTextarea",slot:"Textarea",overridesResolver:(r,e)=>e.textarea})({resize:"none",border:"none",minWidth:0,outline:0,padding:0,paddingInlineEnd:"var(--Textarea-paddingInline)",flex:"auto",alignSelf:"stretch",color:"inherit",backgroundColor:"transparent",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontWeight:"inherit",lineHeight:"inherit","&::-webkit-input-placeholder":{color:"var(--Textarea-placeholderColor)",opacity:"var(--Textarea-placeholderOpacity)"},"&::-moz-placeholder":{color:"var(--Textarea-placeholderColor)",opacity:"var(--Textarea-placeholderOpacity)"},"&:-ms-input-placeholder":{color:"var(--Textarea-placeholderColor)",opacity:"var(--Textarea-placeholderOpacity)"},"&::-ms-input-placeholder":{color:"var(--Textarea-placeholderColor)",opacity:"var(--Textarea-placeholderOpacity)"}}),Ce=B("div",{name:"JoyTextarea",slot:"StartDecorator",overridesResolver:(r,e)=>e.startDecorator})({display:"flex",marginInlineStart:"calc(var(--Textarea-paddingBlock) - var(--Textarea-paddingInline))",marginInlineEnd:"var(--Textarea-paddingBlock)",marginBlockEnd:"var(--Textarea-gap)",color:"var(--Textarea-decoratorColor)",cursor:"initial"}),ze=B("div",{name:"JoyTextarea",slot:"EndDecorator",overridesResolver:(r,e)=>e.endDecorator})({display:"flex",marginInlineStart:"calc(var(--Textarea-paddingBlock) - var(--Textarea-paddingInline))",marginInlineEnd:"var(--Textarea-paddingBlock)",marginBlockStart:"var(--Textarea-gap)",color:"var(--Textarea-decoratorColor)",cursor:"initial"}),Re=v.forwardRef(function(e,c){var l,t,n,h,u,p,H,g;const S=le({props:e,name:"JoyTextarea"}),y=ce(S,J),{propsToForward:C,rootStateClasses:f,inputStateClasses:P,getRootProps:o,getInputProps:m,formControl:a,focused:i,error:b=!1,disabled:x=!1,size:W="md",color:k="neutral",variant:z="outlined",startDecorator:d,endDecorator:w,minRows:E,maxRows:A,component:L,slots:U={},slotProps:V={}}=y,Z=M(y,Te),q=(l=(t=e.disabled)!=null?t:a==null?void 0:a.disabled)!=null?l:x,F=(n=(h=e.error)!=null?h:a==null?void 0:a.error)!=null?n:b,G=(u=(p=e.size)!=null?p:a==null?void 0:a.size)!=null?u:W,K=(H=e.color)!=null?H:F?"danger":(g=a==null?void 0:a.color)!=null?g:k,R=s({instanceColor:F?"danger":e.color},S,{color:K,disabled:q,error:F,focused:i,size:G,variant:z}),D=fe(R),I=s({},Z,{component:L,slots:U,slotProps:V}),[Q,X]=$("root",{ref:c,className:[D.root,f],elementType:be,externalForwardedProps:I,getSlotProps:o,ownerState:R}),[Y,ee]=$("textarea",{additionalProps:{id:a==null?void 0:a.htmlFor,"aria-describedby":a==null?void 0:a["aria-describedby"]},className:[D.textarea,P],elementType:ye,internalForwardedProps:s({},C,{minRows:E,maxRows:A}),externalForwardedProps:I,getSlotProps:m,ownerState:R}),[re,ae]=$("startDecorator",{className:D.startDecorator,elementType:Ce,externalForwardedProps:I,ownerState:R}),[oe,te]=$("endDecorator",{className:D.endDecorator,elementType:ze,externalForwardedProps:I,ownerState:R});return T.jsxs(Q,s({},X,{children:[d&&T.jsx(re,s({},ae,{children:d})),T.jsx(Y,s({},ee)),w&&T.jsx(oe,s({},te,{children:w}))]}))}),$e=Re;export{$e as T};
