import{u as z,r as a,j as e}from"./app-659a3aa2.js";import{A}from"./AuthenticatedLayout-a56b9925.js";import{C as n}from"./CardContainer-713d9aa9.js";import{S as $,P as k}from"./PortalLayout-4dd080df.js";import"./index.es-6780b8c7.js";import{M as L}from"./Modal-cab82769.js";import{T as F}from"./Tooltip-a5a4d78a.js";import{T as M}from"./Textarea-853c4165.js";import{T as O}from"./Typography-4dbb1ff2.js";import"./index-84704c9c.js";import"./VerificationProcess-0d2b000e.js";import"./SecondaryButton-f759061d.js";import"./PersonalInfo-2c76bf67.js";import"./Address-b2f5ad35.js";import"./toPropertyKey-61b1ecea.js";import"./useSlot-d43794ee.js";import"./useIsFocusVisible-7ca602c7.js";import"./useControlled-adcd3c46.js";import"./useEventCallback-0c2e09c7.js";import"./useEnhancedEffect-12b0a06e.js";import"./Popper-26c3d1f1.js";import"./UserName-0c92173c.js";import"./Phone-b419726f.js";import"./CompanyInfo-5d71478b.js";import"./VerificationStep-c3c15079.js";import"./PrimaryButton-bfc388c8.js";import"./Skeleton-22ae0279.js";import"./index-9e3aa4c7.js";import"./ProfilePicture-95ba5e02.js";import"./CreateProject-e710c587.js";import"./ProjectStepper-a31dfa8b.js";import"./extendSxProp-9e510b8c.js";import"./isMuiElement-3bff42a8.js";import"./ProjectTypeSelector-6f56c21f.js";import"./CorporateProjectTypeSelector-2a85e279.js";import"./FamilyEventsTypeSelector-2cc0fb57.js";import"./DigitalContentTypeSelector-91f38218.js";import"./WeddingDetails-6575ed78.js";import"./Time-ed827f8c.js";import"./LiveBroadcastTypeSelector-c3d16e4b.js";import"./LiveEventDetails-bae22e22.js";import"./CreativeEntertainmentTypeSelector-8a17e34a.js";import"./VideoProjectDetails-40e36ef0.js";import"./ProjectPoster-231b66c4.js";import"./Chip-a964b04e.js";import"./variantColorInheritance-f8d1dad2.js";import"./styleUtils-0df93871.js";import"./VideoAdditionalDetails-b10bcf4c.js";import"./EmptyContent-f0c7321b.js";import"./FormControl-ce9c98b9.js";import"./FormControlContext-dd3b9a17.js";import"./Autocomplete-653e6d3e.js";import"./createSvgIcon-b106def2.js";import"./CircularProgress-af137ff7.js";import"./useForwardedInput-be5dd50b.js";import"./ListItemButton-7a78b6ef.js";import"./RadioGroupContext-96bab4a2.js";import"./CreateCallSheet-51bee10a.js";import"./Input-4561b985.js";import"./Select-a8ef8a22.js";import"./index-7f71a8ef.js";import"./CallSheetDetailsForm-6ed5f5d0.js";import"./UpdateCallSheet-a3e95954.js";import"./GeneralCallTimeForm-c89879f5.js";import"./CallSheetProductionSchedule-246588be.js";import"./SceneRow-4a13cc5d.js";import"./EditableCell-25ac580d.js";import"./EditableSelect-b9b77a41.js";import"./Duration-09a34f40.js";import"./BreakRow-461f466a.js";import"./CompanyMoveRow-462377d3.js";import"./AddButton-1ab2e6ad.js";import"./CreateRecipient-c7fa9deb.js";import"./Email-11da6fc8.js";import"./ProjectImagePreview-534c62c0.js";import"./ImageContainer-307535ce.js";import"./LogOutForm-2b7d1a74.js";import"./LocationForm-600a638c.js";import"./lodash-4de87c17.js";import"./Accordion-a4ba251b.js";import"./AccordionContent-02b996ba.js";import"./Hospitals-fe8d748f.js";import"./IconButton-850b944a.js";import"./AddTaskModal-5b11b501.js";import"./ownerWindow-2a12221f.js";function St({project:t}){var f;const{updateCurrentProject:j}=z(),_={showTopBar:!1,showRightContent:!1,size:"page-banner"},v=t,y="Save Project Settings",[s,p]=a.useState({id:"",project_type:"",video_type:"",project_name:"",project_description:"",primary_genre:"",secondary_genre:"",viewer_rating:"",movie_poster:"",project_stage:"",project_status:"",filming_days:"",project_budget:""}),[w,m]=a.useState(t!=null&&t.project_name?`${t.project_name} : Project Settings`:"Project Settings"),[q,b]=a.useState(!1),[d,U]=a.useState(null),[S,u]=a.useState(!1),[x,J]=a.useState({width:0,height:0}),[K,N]=a.useState(!0);a.useState("");const i=730,[P,c]=a.useState(((f=s.project_description)==null?void 0:f.length.toString())||"0"),[C,W]=a.useState({}),[T,h]=a.useState(!1);a.useEffect(()=>{t&&(p({id:t.id||"",project_type:t.project_type||"",video_type:t.video_type||"",project_name:t.project_name||"",project_description:t.project_description||"",primary_genre:t.video_production.primary_genre||"",secondary_genre:t.video_production.secondary_genre||"",viewer_rating:t.video_production.viewer_rating||"",movie_poster:t.video_production.movie_poster||"",project_stage:t.project_stage||"",project_status:t.project_status||"",filming_days:t.video_production.filming_days||"",project_budget:t.project_budget||""}),N(!1),m(`${t.project_name} : Project Settings`))},[t]),console.log(s),a.useEffect(()=>{var o;const r=!!t.video_production.movie_poster;b(r),c(((o=s.project_description)==null?void 0:o.length.toString())||"0")},[t]);const g=(r,o)=>{const l={...s,[r]:o};p(l)},D=r=>{const o=r.target.value.slice(0,i);c(o.length.toString()),g("project_description",o)};function I(r){setTimeout(()=>{s.project_description;let o=r.target.value;o.length>i&&(o=o.substring(0,i)),o=o.replace(/\r?\n|\r/g," "),p({...s,project_description:o}),c(o.length.toString())},0)}const E=async()=>{let r=new FormData;Object.keys(s).forEach(o=>{o!=="movie_poster"&&r.append(o,s[o])}),r.append("poster_width",x.width),r.append("poster_height",x.height),d&&r.append("uploadedImage",d);try{const o={headers:{"Content-Type":"multipart/form-data"}},l=await axios.post(route("projects.update",{id:t.id}),r,o);console.log("Project data received from save:",l.data),m(`${s.project_name} : Project Settings`),j(l.data.project),u(!0),setTimeout(()=>{u(!1)},3e3)}catch(o){console.error("Error updating project:",o)}},B=r=>Number(r).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),R=async()=>{if(!t.id){console.error("No project ID available for deletion");return}try{const r=route("projects.delete",{id:t.id}),o=await axios.delete(r);console.log("Delete response:",o),window.location.href="/projects"}catch(r){console.error("Error deleting project:",r)}};return console.log(s),e.jsx(A,{project:t,showBanner:!0,bannerProps:_,children:{surface:e.jsxs("div",{className:"relative z-50 w-full h-full",children:[e.jsx($,{color:"success",size:"lg",variant:"solid",open:S,className:"w-full max-w-[30rem]",children:"Saved! Project Settings Saved!"}),e.jsx(L,{show:T,maxWidth:"100%",dialogPanelClass:"!max-w-[30rem]",onClose:h,showCloseButton:"true",children:e.jsxs("div",{className:"p-8 text-center h-full flex flex-col justify-center my-auto",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Delete Project"}),e.jsxs("p",{className:"mb-6",children:["Are you sure you want to delete this project? ",e.jsx("br",{})," This action cannot be undone."]}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{onClick:()=>h(!1),className:"bg-slate-200 duration-500 hover:bg-slate-500 hover:text-white text-slate-500 py-2 px-4 rounded",children:"Cancel"}),e.jsx("button",{onClick:R,className:"bg-rose-200 duration-500 hover:bg-rose-500 text-white font-bold py-2 px-4 rounded",children:"Delete Project"})]})]})})]}),portalBody:e.jsx("div",{className:"w-full h-full",children:e.jsx(k,{hasData:v,toolbarTitle:w,toolbarCTAText:y,onPrimaryToolbarButtonClick:E,pageType:"Call Sheets",children:{content:e.jsxs("div",{className:"w-full h-full flex flex-row gap-4",children:[e.jsx("div",{className:"flex flex-col gap-4 w-full h-full max-w-[18rem]"}),e.jsxs("div",{className:"flex flex-col gap-4 w-[185rem]",children:[e.jsx("div",{className:"flex flex-row gap-4",children:e.jsx(n,{header:"Project Title",showButtonIcon:!0,children:e.jsx(F,{arrow:!0,sx:{fontSize:".75rem"},title:"Project Name is Required",open:C.project_name||!1,color:"danger",placement:"top",variant:"outlined",children:e.jsx("input",{type:"text",name:"project_name",placeholder:"Indiana Jones and Raiders of the Lost Ark",value:s.project_name,required:!0,onChange:r=>g("project_name",r.target.value),className:"p-2 border border-gray-300 rounded-md font-bold !text-lg"})})})}),e.jsx(n,{header:"Project Description",className:"",children:e.jsx(M,{minRows:7,maxRows:7,name:"project_description",placeholder:"Epic tale in which an intrepid archaeologist...",value:s.project_description||"",onChange:D,maxLength:i,className:"!text-slate-500 !bg-slate-100",onPaste:I,onKeyDown:r=>{r.key==="Enter"&&r.preventDefault()},endDecorator:e.jsxs(O,{level:"body-xs",sx:{ml:"auto"},children:[P,"/",i," Characters Remaining"]}),sx:{fontSize:".90rem"}})}),e.jsx(n,{header:"Tasks",className:"h-full"})]}),e.jsxs("div",{className:"w-full flex flex-col gap-4",children:[e.jsxs(n,{header:"Budget",children:[e.jsxs("div",{className:"my-8",children:[e.jsx("h2",{className:"text-center !text-sm",children:"Total Budget"}),e.jsxs("p",{className:"text-center font-bold text-4xl text-emerald-500",children:["$",B(s.project_budget)]})]}),e.jsxs("div",{className:"flex flex-row gap-4 justify-between w-full text-center bg-slate-50 py-8",children:[e.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[e.jsx("span",{className:"text-sm text-slate-400",children:"Total Expenses"}),e.jsx("p",{className:"text-2xl font-bold text-slate-600",children:"$500000"})]}),e.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[e.jsx("span",{className:"text-sm text-slate-400",children:"Remaining Budget"}),e.jsx("p",{className:"text-2xl font-bold text-rose-400",children:"-$500000"})]})]})]}),e.jsx(n,{header:"Activity",className:"h-full"})]})]})}})})}})}export{St as default};
