import{r as l,j as r,i as se,c as ie,k as ce,d as le}from"./app-e454a32c.js";import{F as W}from"./index.es-372425f6.js";import{c as de,d as ue}from"./index-54708238.js";import{A as fe}from"./AuthenticatedLayout-4553473c.js";import me from"./ProfilePicture-49b15734.js";import{M as pe}from"./Modal-03e6d302.js";import{P as he}from"./ProjectForm-c36574b3.js";import{C as A}from"./CallSheetForm-20e93dad.js";import xe from"./GeneralCallTimeForm-f622f116.js";import ve from"./CallSheetProductionSchedule-6142bbbd.js";import T from"./CallSheetRecipientForm-b11cbca1.js";import ge from"./ProjectImagePreview-817bab36.js";import be from"./LogOutForm-f10e7709.js";import B from"./LocationForm-e6585ccb.js";import ke from"./AddTaskModal-91a9c815.js";import{a as S,_ as ye}from"./toPropertyKey-a22241f9.js";import{b as Se,E as M,g as we,a as Ce,k as X,s as N,u as je,c as L,f as Ee,h as C,d as De}from"./useSlot-7faddf1c.js";import{r as Re}from"./styleUtils-d305ac7d.js";import{a as Oe,b as Le}from"./colorInversionUtils-9e65a708.js";import{u as ze}from"./useIsFocusVisible-3e69e93a.js";import{u as F}from"./useEventCallback-49b41c49.js";import{o as z}from"./useEnhancedEffect-43c2324b.js";function _(a){return a.substring(2).toLowerCase()}function Fe(a,e){return e.documentElement.clientWidth<a.clientX||e.documentElement.clientHeight<a.clientY}function Ne(a){const{children:e,disableReactTree:d=!1,mouseEvent:o="onClick",onClickAway:f,touchEvent:n="onTouchEnd"}=a,t=l.useRef(!1),m=l.useRef(null),h=l.useRef(!1),b=l.useRef(!1);l.useEffect(()=>(setTimeout(()=>{h.current=!0},0),()=>{h.current=!1}),[]);const v=Se(e.ref,m),p=F(u=>{const c=b.current;b.current=!1;const g=z(m.current);if(!h.current||!m.current||"clientX"in u&&Fe(u,g))return;if(t.current){t.current=!1;return}let i;u.composedPath?i=u.composedPath().indexOf(m.current)>-1:i=!g.documentElement.contains(u.target)||m.current.contains(u.target),!i&&(d||!c)&&f(u)}),x=u=>c=>{b.current=!0;const g=e.props[u];g&&g(c)},y={ref:v};return n!==!1&&(y[n]=x(n)),l.useEffect(()=>{if(n!==!1){const u=_(n),c=z(m.current),g=()=>{t.current=!0};return c.addEventListener(u,p),c.addEventListener("touchmove",g),()=>{c.removeEventListener(u,p),c.removeEventListener("touchmove",g)}}},[p,n]),o!==!1&&(y[o]=x(o)),l.useEffect(()=>{if(o!==!1){const u=_(o),c=z(m.current);return c.addEventListener(u,p),()=>{c.removeEventListener(u,p)}}},[p,o]),r.jsx(l.Fragment,{children:l.cloneElement(e,y)})}function Pe(a={}){const{autoHideDuration:e=null,disableWindowBlurListener:d=!1,onClose:o,open:f,resumeHideDuration:n}=a,t=ze();l.useEffect(()=>{if(!f)return;function i(s){s.defaultPrevented||(s.key==="Escape"||s.key==="Esc")&&(o==null||o(s,"escapeKeyDown"))}return document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i)}},[f,o]);const m=F((i,s)=>{o==null||o(i,s)}),h=F(i=>{!o||i==null||t.start(i,()=>{m(null,"timeout")})});l.useEffect(()=>(f&&h(e),t.clear),[f,e,h,t]);const b=i=>{o==null||o(i,"clickaway")},v=t.clear,p=l.useCallback(()=>{e!=null&&h(n??e*.5)},[e,n,h]),x=i=>s=>{const k=i.onBlur;k==null||k(s),p()},y=i=>s=>{const k=i.onFocus;k==null||k(s),v()},u=i=>s=>{const k=i.onMouseEnter;k==null||k(s),v()},c=i=>s=>{const k=i.onMouseLeave;k==null||k(s),p()};return l.useEffect(()=>{if(!d&&f)return window.addEventListener("focus",p),window.addEventListener("blur",v),()=>{window.removeEventListener("focus",p),window.removeEventListener("blur",v)}},[d,f,p,v]),{getRootProps:(i={})=>{const s=S({},M(a),M(i));return S({role:"presentation"},i,s,{onBlur:x(s),onFocus:y(s),onMouseEnter:u(s),onMouseLeave:c(s)})},onClickAway:b}}function $e({children:a}){l.useState(!1);const[e,d]=l.useState(!1),{expandDrawer:o,drawerWidth:f}=se(),[n,t]=l.useState(!1);l.useState(!0);const m=()=>{t(!n),n&&o("normal")},h={normal:"w-[25%]",wide:"w-[96%]"};return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`drawer-overlay ${n?"drawer-overlay-open":""}`,onClick:m}),r.jsxs("div",{className:`fixed top-0 shadow-md right-0 h-full ${n?"translate-x-0":"translate-x-full"} transform transition-all duration-[500ms] ease-in-out z-50 ${h[f]}`,children:[r.jsx("div",{className:`fade-in-delay ${e?"opacity-1":"opacity-0"} ${n?"bg-white text-red-500":"bg-red-500 text-white border-2 border-white"} duration-500 absolute shadow-[-2px_0px_3px_rgba(0,0,0,0.07)] left-[-40px] top-[50%] -translate-y-[50%] w-10 h-10 flex rounded-tl-lg rounded-bl-lg py-10 justify-center items-center cursor-pointer`,onClick:m,children:r.jsx(W,{className:"text-md",icon:de})}),r.jsx("div",{className:"bg-slate-100 p-8 h-full overflow-auto",children:a})]})]})}function Ae(a){return we("MuiSnackbar",a)}Ce("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","colorPrimary","colorDanger","colorNeutral","colorSuccess","colorWarning","endDecorator","sizeSm","sizeMd","sizeLg","startDecorator","variantPlain","variantOutlined","variantSoft","variantSolid"]);const Te=["anchorOrigin","animationDuration","autoHideDuration","color","children","className","component","disableWindowBlurListener","endDecorator","invertedColors","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","onUnmount","open","resumeHideDuration","size","slots","slotProps","startDecorator","variant"];let U=a=>a,I,H;const Be=a=>{const{variant:e,color:d,size:o,anchorOrigin:f}=a,n={root:["root",o&&`size${C(o)}`,d&&`color${C(d)}`,e&&`variant${C(e)}`,`anchorOrigin${C(f.vertical)}${C(f.horizontal)}`],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return De(n,Ae,{})},Me=X(I||(I=U`
  0% {
    transform: translateX(var(--Snackbar-translateX, 0px)) translateY(calc(var(--_Snackbar-anchorBottom, 1) * 100%));
    opacity: 0;
  }
  50% {
    opacity: 1;
  }
  100% {
    transform: translateX(var(--Snackbar-translateX, 0px)) translateY(0);
  }
`)),_e=X(H||(H=U`
  0% {
    transform: translateX(var(--Snackbar-translateX, 0px)) translateY(0);
    opacity: 1;
  }
  100% {
    transform: translateX(var(--Snackbar-translateX, 0px)) translateY(calc(var(--_Snackbar-anchorBottom, 1) * 100%));
    opacity: 0;
  }
`)),Ie=N("div",{name:"JoySnackbar",slot:"Root",overridesResolver:(a,e)=>e.root})(({theme:a,ownerState:e})=>{var d,o,f,n,t,m,h;const{p:b,padding:v,borderRadius:p}=Re({theme:a,ownerState:e},["p","padding","borderRadius"]);return[S({"--Snackbar-radius":a.vars.radius.sm,"--Snackbar-decoratorChildRadius":"max((var(--Snackbar-radius) - var(--variant-borderWidth, 0px)) - var(--Snackbar-padding), min(var(--Snackbar-padding) + var(--variant-borderWidth, 0px), var(--Snackbar-radius) / 2))","--Button-minHeight":"var(--Snackbar-decoratorChildHeight)","--IconButton-size":"var(--Snackbar-decoratorChildHeight)","--Button-radius":"var(--Snackbar-decoratorChildRadius)","--IconButton-radius":"var(--Snackbar-decoratorChildRadius)","--Icon-color":"currentColor"},e.size==="sm"&&{"--Snackbar-padding":"0.75rem","--Snackbar-inset":"0.5rem","--Snackbar-decoratorChildHeight":"1.5rem","--Icon-fontSize":a.vars.fontSize.xl,gap:"0.5rem"},e.size==="md"&&{"--Snackbar-padding":"1rem","--Snackbar-inset":"0.75rem","--Snackbar-decoratorChildHeight":"2rem","--Icon-fontSize":a.vars.fontSize.xl,gap:"0.625rem"},e.size==="lg"&&{"--Snackbar-padding":"1.25rem","--Snackbar-inset":"1rem","--Snackbar-decoratorChildHeight":"2.375rem","--Icon-fontSize":a.vars.fontSize.xl2,gap:"0.875rem"},{zIndex:a.vars.zIndex.snackbar,position:"fixed",display:"flex",alignItems:"center",minWidth:300,top:((d=e.anchorOrigin)==null?void 0:d.vertical)==="top"?"var(--Snackbar-inset)":void 0,left:((o=e.anchorOrigin)==null?void 0:o.horizontal)==="left"?"var(--Snackbar-inset)":void 0,bottom:((f=e.anchorOrigin)==null?void 0:f.vertical)==="bottom"?"var(--Snackbar-inset)":void 0,right:((n=e.anchorOrigin)==null?void 0:n.horizontal)==="right"?"var(--Snackbar-inset)":void 0},((t=e.anchorOrigin)==null?void 0:t.horizontal)==="center"&&{"--Snackbar-translateX":"-50%",left:"50%",transform:"translateX(var(--Snackbar-translateX))"},((m=e.anchorOrigin)==null?void 0:m.vertical)==="top"&&{"--_Snackbar-anchorBottom":"-1"},{animation:`${Me} ${e.animationDuration}ms forwards`},!e.open&&{animationName:_e},{boxShadow:a.vars.shadow.lg,backgroundColor:a.vars.palette.background.surface,padding:"var(--Snackbar-padding)",borderRadius:"var(--Snackbar-radius)"},a.typography[`body-${{sm:"xs",md:"sm",lg:"md"}[e.size]}`],e.variant==="solid"&&e.color&&e.invertedColors&&Le(e.color)(a),e.variant==="soft"&&e.color&&e.invertedColors&&Oe(e.color)(a),(h=a.variants[e.variant])==null?void 0:h[e.color]),b!==void 0&&{"--Snackbar-padding":b},v!==void 0&&{"--Snackbar-padding":v},p!==void 0&&{"--Snackbar-radius":p}]}),He=N("span",{name:"JoySnackbar",slot:"StartDecorator",overridesResolver:(a,e)=>e.startDecorator})({display:"inherit",flex:"none"}),We=N("span",{name:"JoySnackbar",slot:"EndDecorator",overridesResolver:(a,e)=>e.endDecorator})({display:"inherit",flex:"none",marginLeft:"auto"}),Xe={vertical:"bottom",horizontal:"right"},Ue=l.forwardRef(function(e,d){const o=je({props:e,name:"JoySnackbar"}),{anchorOrigin:f=Xe,animationDuration:n=300,autoHideDuration:t=null,color:m="neutral",children:h,className:b,component:v,disableWindowBlurListener:p=!1,endDecorator:x,invertedColors:y=!1,onUnmount:u,open:c,size:g="md",slots:i={},slotProps:s,startDecorator:k,variant:Y="outlined"}=o,J=ye(o,Te),[K,P]=l.useState(!0),[G,j]=l.useState(!1),E=l.useRef(u);E.current=u,l.useEffect(()=>{if(c)j(!1),P(!1);else{j(!0);const O=setTimeout(()=>{var $;P(!0),j(!1),($=E.current)==null||$.call(E)},n);return()=>{clearTimeout(O)}}},[c,n]);const w=S({},o,{anchorOrigin:f,autoHideDuration:t,color:m,animationDuration:n,disableWindowBlurListener:p,invertedColors:y,size:g,variant:Y});delete w.onUnmount;const D=Be(w),{getRootProps:V,onClickAway:q}=Pe(w),Q=O=>{G||q(O)},R=S({},J,{component:v,slots:i,slotProps:s}),[Z,ee]=L("root",{ref:d,className:Ee(D.root,b),elementType:Ie,externalForwardedProps:R,getSlotProps:V,ownerState:w}),[re,ae]=L("startDecorator",{className:D.startDecorator,elementType:He,externalForwardedProps:R,ownerState:w}),[te,oe]=L("endDecorator",{className:D.endDecorator,elementType:We,externalForwardedProps:R,ownerState:w}),ne=i.clickAway||Ne;return!c&&K?null:r.jsx(ne,S({onClickAway:Q},typeof(s==null?void 0:s.clickAway)=="function"?s.clickAway(w):s==null?void 0:s.clickAway,{children:r.jsxs(Z,S({},ee,{children:[k&&r.jsx(re,S({},ae,{children:k})),h,x&&r.jsx(te,S({},oe,{children:x}))]}))}))}),Ye=Ue;function Je({user:a,project:e,callSheet:d,roles:o}){const{isModalOpen:f,toggleModal:n,modalContent:t}=ie(),{isSnackOpen:m,setIsSnackOpen:h,snackContent:b}=ce(),v=()=>{switch(t==null?void 0:t.type){case"projectForm":return r.jsx(he,{});case"addTask":return r.jsx(ke,{onClose:x});case"newLocationForm":return r.jsx(B,{project:e,callSheet:d,onClose:x});case"editLocationForm":return r.jsx(B,{project:e,callSheet:t==null?void 0:t.data,mode:"edit",onClose:x});case"projectImage":return r.jsx(ge,{data:(t==null?void 0:t.imageUrl)||"/images/movie_posters/coming_soon_poster.jpg"});case"generalCallTime":return r.jsx(xe,{callSheet:d,data:t==null?void 0:t.data});case"newCallSheetForm":return r.jsx(A,{user:a,roles:o,project:e,callSheet:d,formType:t==null?void 0:t.data,onClose:x});case"editCallSheetForm":return r.jsx(A,{user:a,roles:o,project:e,callSheet:d,mode:"edit",formType:t==null?void 0:t.data,onClose:x});case"productionSchedule":return r.jsx(ve,{project:e,callSheet:d});case"recipientForm":return r.jsx(T,{roles:o,project:e,callSheet:d,onClose:x});case"editRecipientForm":return r.jsx(T,{roles:o,project:e,callSheet:d,recipient:t==null?void 0:t.data,onClose:x});case"logOut":return r.jsx(be,{});default:return null}},p=!["logOut"].includes(t==null?void 0:t.type),x=()=>{f&&n(!1)},y=()=>{switch(t==null?void 0:t.type){case"productionSchedule":return{width:"full",height:"full"};default:return{width:"auto",height:"auto"}}},{width:u,height:c}=y(),g=()=>{switch(t==null?void 0:t.type){case"productionSchedule":return"!bg-slate-100";default:return"bg-white"}};return r.jsxs(r.Fragment,{children:[r.jsx(pe,{isOpen:f,onClose:x,showCloseButton:p,className:`w-${u} h-${c} ${g()}`,children:v()}),r.jsx(Ye,{autoHideDuration:3e3,anchorOrigin:{vertical:"bottom",horizontal:"right"},open:m,variant:"outlined",size:"lg",color:"success",onClose:(i,s)=>{s!=="clickaway"&&h(!1)},slotProps:{root:{sx:{backgroundColor:"rgb(52 211 153)",borderColor:"rgb(16 185 129)",borderWidth:".15rem",color:"#fff",fontWeight:"bold",bottom:"2rem",right:"2rem",minWidth:"400px",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);"}}},children:b})]})}function xr({children:a,breadcrumbs:e,project:d,callSheet:o,user:f,roles:n,actionClass:t}){const[m,h]=l.useState(!1),[b,v]=l.useState(!1);l.useEffect(()=>{h(!0),v(!0)},[]);const p=()=>!e||!Array.isArray(e)?null:r.jsx(r.Fragment,{children:e.map((c,g)=>r.jsxs("span",{className:`text-slate-500 flex ${c.className||""}`,children:[g!==0&&r.jsx("span",{className:"mx-2 my-auto text-slate-300",children:" > "})," ",c.url?r.jsx(le,{href:c.url,className:`text-slate-300 hover:text-slate-500 duration-500 transition-all hover:underline text-xl ${c.className||""}`,children:c.label}):r.jsx("span",{className:`text-xl text-gray-500 font-bold ${c.className||""}`,children:c.label})]},g))}),x=a&&a.toolbar,y=a&&a.body,u=a&&a.action;return r.jsx(fe,{project:d,children:{portal:r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"absolute z-50",children:[r.jsx(Je,{user:f,project:d,callSheet:o,roles:n}),u&&r.jsx($e,{children:a.action})]}),r.jsxs("div",{className:"w-full h-full pt-[1.5rem] pb-[1.5rem] pl-[7rem] pr-[1.75rem] max-w-[120rem] mx-auto flex flex-col gap-4",children:[r.jsxs("div",{id:"portal-header",className:"w-full flex flex-row justify-between",children:[r.jsx("div",{className:`fade-in h-full my-auto flex items-center ${m?"opacity-1":"opacity-0"}`,children:p()}),r.jsxs("div",{className:"flex flex-row gap-8 items-center",children:[r.jsx(W,{className:"text-xl text-slate-300",icon:ue}),r.jsx(me,{href:route("profile.settings"),alt:"User's Profile",className:"h-[3rem] w-[3rem]"})]})]}),r.jsxs("div",{id:"portal-body",className:"flex flex-col gap-4 h-full w-full ",children:[x&&r.jsx("div",{className:"w-full h-full max-h-[2.5rem] max-w-[80%] mx-auto",children:a.toolbar}),y&&r.jsx("div",{className:`fade-in-delay h-full ${b?"opacity-1":"opacity-0"}`,children:a.body})]})]})]})}})}export{xr as P,Ye as S};
