import{k as d,r as l,j as s}from"./app-e454a32c.js";import{l as x}from"./lodash-ff26d80e.js";import{C as h}from"./CardContainer-6cb7a831.js";import{T as f}from"./Textarea-b1b6024c.js";import{T as g}from"./Typography-48b79e4a.js";import"./index.es-372425f6.js";import"./index-af94e81f.js";import"./index-54708238.js";import"./toPropertyKey-a22241f9.js";import"./useSlot-7faddf1c.js";import"./useForwardedInput-fe782f4f.js";import"./FormControlContext-dfeeca36.js";import"./ownerWindow-135fedc8.js";import"./useEnhancedEffect-43c2324b.js";import"./debounce-517eeb3c.js";import"./extendSxProp-70f22bd8.js";import"./isMuiElement-fba65005.js";function L({callSheet:o,isSave:p=!1}){const{setSnackContent:n,setIsSnackOpen:i}=d(),[a,u]=l.useState(o.bulletin||""),r=365,m=l.useCallback(x.debounce(async e=>{try{const t=await axios.put(route("projects.callSheets.update.bulletin",{id:o.project_id,callSheetId:o.id}),{bulletin:e});if(t.status<200||t.status>=300)throw new Error("Failed to update bulletin");setTimeout(()=>{n("Bulletin updated successfully"),i(!0)},600)}catch(t){console.error(t),n("Failed to update bulletin"),i(!1)}},600),[]),c=e=>{let t=e.target.value;t=t.replace(/\n/g,""),t.length>r&&(t=t.substring(0,r)),u(t),p&&m(t)};return s.jsx(h,{header:"Bulletin",children:s.jsx(f,{name:"bulletin",size:"sm",variant:"soft",minRows:4,maxRows:4,value:a,placeholder:"Type anythingâ€¦",className:"!bg-slate-100",maxLength:r,onChange:c,onKeyDown:e=>{e.key==="Enter"&&e.preventDefault()},endDecorator:s.jsxs(g,{level:"body-xs",sx:{ml:"auto"},children:[a.length," / ",r," character(s) (",r-a.length," remaining)"]})})})}export{L as default};
