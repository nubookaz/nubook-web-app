import{k as d,r as l,j as s}from"./app-659a3aa2.js";import{l as x}from"./lodash-4de87c17.js";import{C as h}from"./CardContainer-713d9aa9.js";import{T as f}from"./Textarea-853c4165.js";import{T as g}from"./Typography-4dbb1ff2.js";import"./index.es-6780b8c7.js";import"./index-9e3aa4c7.js";import"./index-84704c9c.js";import"./toPropertyKey-61b1ecea.js";import"./useSlot-d43794ee.js";import"./useForwardedInput-be5dd50b.js";import"./FormControlContext-dd3b9a17.js";import"./ownerWindow-2a12221f.js";import"./useEnhancedEffect-12b0a06e.js";import"./extendSxProp-9e510b8c.js";import"./isMuiElement-3bff42a8.js";function K({callSheet:a,isSave:p=!1}){const{setSnackContent:n,setIsSnackOpen:i}=d(),[o,u]=l.useState(a.bulletin||""),r=365,m=l.useCallback(x.debounce(async e=>{try{const t=await axios.put(route("projects.callSheets.update.bulletin",{id:a.project_id,callSheetId:a.id}),{bulletin:e});if(t.status<200||t.status>=300)throw new Error("Failed to update bulletin");setTimeout(()=>{n("Bulletin updated successfully"),i(!0)},600)}catch(t){console.error(t),n("Failed to update bulletin"),i(!1)}},600),[]),c=e=>{let t=e.target.value;t=t.replace(/\n/g,""),t.length>r&&(t=t.substring(0,r)),u(t),p&&m(t)};return s.jsx(h,{header:"Bulletin",children:s.jsx(f,{name:"bulletin",size:"sm",variant:"soft",minRows:4,maxRows:4,value:o,placeholder:"Type anythingâ€¦",className:"!bg-slate-100",maxLength:r,onChange:c,onKeyDown:e=>{e.key==="Enter"&&e.preventDefault()},endDecorator:s.jsxs(g,{level:"body-xs",sx:{ml:"auto"},children:[o.length," / ",r," character(s) (",r-o.length," remaining)"]})})})}export{K as default};
