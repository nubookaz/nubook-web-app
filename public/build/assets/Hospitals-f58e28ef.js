import{r as f,j as t}from"./app-eefe6961.js";import{F as g}from"./index.es-6f9cfa5f.js";import{G as v}from"./index-1074990b.js";import"./index-d5199ec3.js";const C=({existingHospitalData:a,locationAddress:s,onSelectHospital:x})=>{const[u,m]=f.useState([]),[n,h]=f.useState(null),y=(e,l,r,c)=>{if([e,l,r,c].some(w=>typeof w!="number"))return"Distance not available";const o=3958.8,i=e*(Math.PI/180),d=r*(Math.PI/180),j=d-i,p=(c-l)*(Math.PI/180);return(2*o*Math.asin(Math.sqrt(Math.sin(j/2)*Math.sin(j/2)+Math.cos(i)*Math.cos(d)*Math.sin(p/2)*Math.sin(p/2)))).toFixed(2)},b=async()=>{if(!s||!s.latitude||!s.longitude){m([]);return}const e=`/nearby-hospitals?latitude=${s.latitude}&longitude=${s.longitude}`;try{const r=await(await fetch(e)).json();m(r.results||[])}catch(l){console.error("Error fetching hospitals:",l),m([])}};f.useEffect(()=>{a&&h({name:a.name,vicinity:a.street_address,place_id:a.place_id,geometry:{location:{lat:parseFloat(a.latitude||0),lng:parseFloat(a.longitude||0)}}}),b()},[s,a]);const N=e=>{h(e),x&&x(e)};return t.jsxs("div",{children:[t.jsx("div",{className:"flex flex-row justify-between items-center w-full mb-4 ",children:t.jsx("h3",{className:"text-slate-400",children:"Nearby Hospitals"})}),t.jsx("div",{style:{maxHeight:"300px",overflowY:"auto"},children:u.length>0?t.jsx("ul",{className:"flex flex-col gap-4",children:u.map((e,l)=>{var r,c,o,i;return t.jsxs("li",{className:`flex flex-row gap-4 justify-between items-center px-4 py-2 bg-slate-50 shadow-md rounded-xl cursor-pointer ${(n==null?void 0:n.place_id)===e.place_id?"duration-500 transition-all border-emerald-500 border-2":""}`,onClick:()=>N(e),children:[t.jsx("div",{children:(n==null?void 0:n.place_id)===e.place_id&&t.jsx(g,{icon:v,className:"text-green-500"})}),t.jsxs("div",{className:"flex flex-row w-full justify-between",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("p",{className:"text-slate-500 font-bold text-sm",children:e.name}),t.jsx("span",{className:"text-sm text-slate-400",children:e.vicinity||e.address})]}),t.jsx("div",{children:t.jsxs("span",{className:"text-sm text-slate-400 ml-2",children:[y(s==null?void 0:s.latitude,s==null?void 0:s.longitude,(c=(r=e.geometry)==null?void 0:r.location)==null?void 0:c.lat,(i=(o=e.geometry)==null?void 0:o.location)==null?void 0:i.lng)," miles"]})})]})]},l)})}):t.jsx("p",{children:"No nearby hospitals found."})})]})};export{C as default};
