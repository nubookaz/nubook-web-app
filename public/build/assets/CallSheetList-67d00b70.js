import{b as y,r as c,j as r,d as u}from"./app-eefe6961.js";import{F as h}from"./index.es-6f9cfa5f.js";import{U as N,a5 as D}from"./index-1074990b.js";import"./index-d5199ec3.js";function A({project:d,callSheets:o,view:n}){const{toggleModal:m}=y(),f=()=>{m({type:"newCallSheetForm",data:"create"})},[x,i]=c.useState(o);c.useEffect(()=>{i(o)},[o]);const p=e=>{i(e)},g=e=>{const s={Publish:1,Unpublished:2,Draft:3},l=e.map(t=>({...t,statusOrder:s[t.status]}));return l.sort((t,a)=>t.statusOrder!==a.statusOrder?t.statusOrder-a.statusOrder:new Date(a.updatedAt)-new Date(t.updatedAt)),l},w=n==="View All"?o:o.filter(e=>e.status===n),b=g(w);function j(e){const s=new Date(e),l=s.toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric"}),t=s.getDate();let a="th";return t%10===1&&t!==11?a="st":t%10===2&&t!==12?a="nd":t%10===3&&t!==13&&(a="rd"),l.replace(/\d+/,`${t}${a}`)}function v(e){return new Date(e).toLocaleString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}const C=async(e,s)=>{if(e.stopPropagation(),window.confirm("Are you sure you want to delete this call sheet?"))try{const l=await axios.delete(route("callsheets.softDelete",{id:d.id,callSheetId:s}));console.log(l.data),alert("Call sheet deleted successfully.");const t=x.filter(a=>a.id!==s);p(t)}catch(l){console.error("There was an error deleting the call sheet:",l),alert("Failed to delete the call sheet.")}};return r.jsxs("div",{className:"grid grid-cols-6 grid-rows-3 gap-10 flex-wrap h-full px-6",children:[b.map(e=>r.jsxs("div",{className:"letter mx-3 w-full relative group",children:[r.jsx(u,{className:"block w-full h-full absolute inset-0",href:route("projects.callSheets.details.page",{id:d.id,callSheetId:e.id})}),r.jsxs("div",{children:[r.jsx("span",{className:"font-normal text-xs bg-slate-50 px-4 py-1 flex text-center rounded mb-2 w-fit",children:e.status}),r.jsx("h2",{className:"font-normal text-xl",children:e.call_sheet_name}),r.jsxs("p",{className:"font-normal text-sm",children:["Scheduled Date:",j(e.call_sheet_date_time)]}),r.jsxs("div",{className:"mt-8",children:[r.jsx("h4",{children:"General Call Time:"}),r.jsx("p",{className:"text-xl text-emerald-500 font-bold",children:v(e.call_sheet_date_time)})]})]}),r.jsxs("div",{className:"opacity-0 group-hover:opacity-100 duration-500 transition-all absolute bottom-4 right-4 flex flex-row gap-4",children:[r.jsx(u,{href:route("projects.callSheets.details.page",{id:d.id,callSheetId:e.id}),children:r.jsx(h,{icon:N,className:"w-4 p-[.85rem] rounded-full border-2 hover:text-emerald-500 hover:border-emerald-500 hover:bg-slate-100 duration-500 transition-all"})}),r.jsx("button",{onClick:s=>C(s,e.id),children:r.jsx(h,{icon:D,className:"w-4 p-[.85rem] rounded-full border-2 hover:text-rose-500 hover:border-rose-500 hover:bg-slate-100 duration-500 transition-all"})})]})]},e.id)),r.jsx("div",{onClick:f,className:"border-2 border-dashed border-slate-300 duration-500 bg-white hover:border-dashed hover:border-slate-400 cursor-pointer px-[4rem] text-center text-xl text-slate-300 rounded-lg h-full w-full flex justify-center items-center m-auto hover:bg-slate-300 hover:text-slate-500",children:"Click here to create a new call sheet!"})]})}export{A as default};
