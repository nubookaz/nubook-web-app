import{r as l,j as t,e as ne,l as se,m as ie,u as ce,c as le,d as de}from"./app-8b83436b.js";import{F as W}from"./index.es-ee268f83.js";import{c as ue,d as fe}from"./index-e6ab5b50.js";import{A as me}from"./AuthenticatedLayout-aa5c18fe.js";import pe from"./ProfilePicture-3be45740.js";import{M as he}from"./Modal-16f11f32.js";import xe from"./CreateProject-e8785020.js";import ve from"./CreateCallSheet-493e27c0.js";import ge from"./UpdateCallSheet-adce2eb1.js";import be from"./GeneralCallTimeForm-9707d64a.js";import ke from"./CallSheetProductionSchedule-afffb81e.js";import M from"./CreateRecipient-d4223906.js";import Se from"./ProjectImagePreview-1c08a658.js";import ye from"./LogOutForm-3f087925.js";import B from"./LocationForm-eea67452.js";import we from"./AddTaskModal-6ed8cc62.js";import{a as y,_ as Ce}from"./toPropertyKey-39201a13.js";import{b as je,E as T,g as De,a as Ee,k as X,s as P,u as Re,c as $,f as Oe,h as j,d as Le}from"./useSlot-a2532144.js";import{r as $e}from"./styleUtils-b870bb2a.js";import{a as ze,b as Ne}from"./Autocomplete-f1ff51db.js";import{u as Pe}from"./useIsFocusVisible-97f68d26.js";import{u as N}from"./useEventCallback-96e4a742.js";import{o as z}from"./useEnhancedEffect-99238f73.js";function _(a){return a.substring(2).toLowerCase()}function Fe(a,e){return e.documentElement.clientWidth<a.clientX||e.documentElement.clientHeight<a.clientY}function Ae(a){const{children:e,disableReactTree:u=!1,mouseEvent:o="onClick",onClickAway:f,touchEvent:c="onTouchEnd"}=a,r=l.useRef(!1),m=l.useRef(null),x=l.useRef(!1),b=l.useRef(!1);l.useEffect(()=>(setTimeout(()=>{x.current=!0},0),()=>{x.current=!1}),[]);const v=je(e.ref,m),p=N(n=>{const h=b.current;b.current=!1;const g=z(m.current);if(!x.current||!m.current||"clientX"in n&&Fe(n,g))return;if(r.current){r.current=!1;return}let s;n.composedPath?s=n.composedPath().indexOf(m.current)>-1:s=!g.documentElement.contains(n.target)||m.current.contains(n.target),!s&&(u||!h)&&f(n)}),k=n=>h=>{b.current=!0;const g=e.props[n];g&&g(h)},S={ref:v};return c!==!1&&(S[c]=k(c)),l.useEffect(()=>{if(c!==!1){const n=_(c),h=z(m.current),g=()=>{r.current=!0};return h.addEventListener(n,p),h.addEventListener("touchmove",g),()=>{h.removeEventListener(n,p),h.removeEventListener("touchmove",g)}}},[p,c]),o!==!1&&(S[o]=k(o)),l.useEffect(()=>{if(o!==!1){const n=_(o),h=z(m.current);return h.addEventListener(n,p),()=>{h.removeEventListener(n,p)}}},[p,o]),t.jsx(l.Fragment,{children:l.cloneElement(e,S)})}function Me(a={}){const{autoHideDuration:e=null,disableWindowBlurListener:u=!1,onClose:o,open:f,resumeHideDuration:c}=a,r=Pe();l.useEffect(()=>{if(!f)return;function s(i){i.defaultPrevented||(i.key==="Escape"||i.key==="Esc")&&(o==null||o(i,"escapeKeyDown"))}return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)}},[f,o]);const m=N((s,i)=>{o==null||o(s,i)}),x=N(s=>{!o||s==null||r.start(s,()=>{m(null,"timeout")})});l.useEffect(()=>(f&&x(e),r.clear),[f,e,x,r]);const b=s=>{o==null||o(s,"clickaway")},v=r.clear,p=l.useCallback(()=>{e!=null&&x(c??e*.5)},[e,c,x]),k=s=>i=>{const d=s.onBlur;d==null||d(i),p()},S=s=>i=>{const d=s.onFocus;d==null||d(i),v()},n=s=>i=>{const d=s.onMouseEnter;d==null||d(i),v()},h=s=>i=>{const d=s.onMouseLeave;d==null||d(i),p()};return l.useEffect(()=>{if(!u&&f)return window.addEventListener("focus",p),window.addEventListener("blur",v),()=>{window.removeEventListener("focus",p),window.removeEventListener("blur",v)}},[u,f,p,v]),{getRootProps:(s={})=>{const i=y({},T(a),T(s));return y({role:"presentation"},s,i,{onBlur:k(i),onFocus:S(i),onMouseEnter:n(i),onMouseLeave:h(i)})},onClickAway:b}}function Be(a){return De("MuiSnackbar",a)}Ee("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","colorPrimary","colorDanger","colorNeutral","colorSuccess","colorWarning","endDecorator","sizeSm","sizeMd","sizeLg","startDecorator","variantPlain","variantOutlined","variantSoft","variantSolid"]);const Te=["anchorOrigin","animationDuration","autoHideDuration","color","children","className","component","disableWindowBlurListener","endDecorator","invertedColors","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","onUnmount","open","resumeHideDuration","size","slots","slotProps","startDecorator","variant"];let U=a=>a,I,H;const _e=a=>{const{variant:e,color:u,size:o,anchorOrigin:f}=a,c={root:["root",o&&`size${j(o)}`,u&&`color${j(u)}`,e&&`variant${j(e)}`,`anchorOrigin${j(f.vertical)}${j(f.horizontal)}`],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return Le(c,Be,{})},Ie=X(I||(I=U`
  0% {
    transform: translateX(var(--Snackbar-translateX, 0px)) translateY(calc(var(--_Snackbar-anchorBottom, 1) * 100%));
    opacity: 0;
  }
  50% {
    opacity: 1;
  }
  100% {
    transform: translateX(var(--Snackbar-translateX, 0px)) translateY(0);
  }
`)),He=X(H||(H=U`
  0% {
    transform: translateX(var(--Snackbar-translateX, 0px)) translateY(0);
    opacity: 1;
  }
  100% {
    transform: translateX(var(--Snackbar-translateX, 0px)) translateY(calc(var(--_Snackbar-anchorBottom, 1) * 100%));
    opacity: 0;
  }
`)),We=P("div",{name:"JoySnackbar",slot:"Root",overridesResolver:(a,e)=>e.root})(({theme:a,ownerState:e})=>{var u,o,f,c,r,m,x;const{p:b,padding:v,borderRadius:p}=$e({theme:a,ownerState:e},["p","padding","borderRadius"]);return[y({"--Snackbar-radius":a.vars.radius.sm,"--Snackbar-decoratorChildRadius":"max((var(--Snackbar-radius) - var(--variant-borderWidth, 0px)) - var(--Snackbar-padding), min(var(--Snackbar-padding) + var(--variant-borderWidth, 0px), var(--Snackbar-radius) / 2))","--Button-minHeight":"var(--Snackbar-decoratorChildHeight)","--IconButton-size":"var(--Snackbar-decoratorChildHeight)","--Button-radius":"var(--Snackbar-decoratorChildRadius)","--IconButton-radius":"var(--Snackbar-decoratorChildRadius)","--Icon-color":"currentColor"},e.size==="sm"&&{"--Snackbar-padding":"0.75rem","--Snackbar-inset":"0.5rem","--Snackbar-decoratorChildHeight":"1.5rem","--Icon-fontSize":a.vars.fontSize.xl,gap:"0.5rem"},e.size==="md"&&{"--Snackbar-padding":"1rem","--Snackbar-inset":"0.75rem","--Snackbar-decoratorChildHeight":"2rem","--Icon-fontSize":a.vars.fontSize.xl,gap:"0.625rem"},e.size==="lg"&&{"--Snackbar-padding":"1.25rem","--Snackbar-inset":"1rem","--Snackbar-decoratorChildHeight":"2.375rem","--Icon-fontSize":a.vars.fontSize.xl2,gap:"0.875rem"},{zIndex:a.vars.zIndex.snackbar,position:"fixed",display:"flex",alignItems:"center",minWidth:300,top:((u=e.anchorOrigin)==null?void 0:u.vertical)==="top"?"var(--Snackbar-inset)":void 0,left:((o=e.anchorOrigin)==null?void 0:o.horizontal)==="left"?"var(--Snackbar-inset)":void 0,bottom:((f=e.anchorOrigin)==null?void 0:f.vertical)==="bottom"?"var(--Snackbar-inset)":void 0,right:((c=e.anchorOrigin)==null?void 0:c.horizontal)==="right"?"var(--Snackbar-inset)":void 0},((r=e.anchorOrigin)==null?void 0:r.horizontal)==="center"&&{"--Snackbar-translateX":"-50%",left:"50%",transform:"translateX(var(--Snackbar-translateX))"},((m=e.anchorOrigin)==null?void 0:m.vertical)==="top"&&{"--_Snackbar-anchorBottom":"-1"},{animation:`${Ie} ${e.animationDuration}ms forwards`},!e.open&&{animationName:He},{boxShadow:a.vars.shadow.lg,backgroundColor:a.vars.palette.background.surface,padding:"var(--Snackbar-padding)",borderRadius:"var(--Snackbar-radius)"},a.typography[`body-${{sm:"xs",md:"sm",lg:"md"}[e.size]}`],e.variant==="solid"&&e.color&&e.invertedColors&&Ne(e.color)(a),e.variant==="soft"&&e.color&&e.invertedColors&&ze(e.color)(a),(x=a.variants[e.variant])==null?void 0:x[e.color]),b!==void 0&&{"--Snackbar-padding":b},v!==void 0&&{"--Snackbar-padding":v},p!==void 0&&{"--Snackbar-radius":p}]}),Xe=P("span",{name:"JoySnackbar",slot:"StartDecorator",overridesResolver:(a,e)=>e.startDecorator})({display:"inherit",flex:"none"}),Ue=P("span",{name:"JoySnackbar",slot:"EndDecorator",overridesResolver:(a,e)=>e.endDecorator})({display:"inherit",flex:"none",marginLeft:"auto"}),Ye={vertical:"bottom",horizontal:"right"},Je=l.forwardRef(function(e,u){const o=Re({props:e,name:"JoySnackbar"}),{anchorOrigin:f=Ye,animationDuration:c=300,autoHideDuration:r=null,color:m="neutral",children:x,className:b,component:v,disableWindowBlurListener:p=!1,endDecorator:k,invertedColors:S=!1,onUnmount:n,open:h,size:g="md",slots:s={},slotProps:i,startDecorator:d,variant:C="outlined"}=o,Y=Ce(o,Te),[J,F]=l.useState(!0),[K,D]=l.useState(!1),E=l.useRef(n);E.current=n,l.useEffect(()=>{if(h)D(!1),F(!1);else{D(!0);const L=setTimeout(()=>{var A;F(!0),D(!1),(A=E.current)==null||A.call(E)},c);return()=>{clearTimeout(L)}}},[h,c]);const w=y({},o,{anchorOrigin:f,autoHideDuration:r,color:m,animationDuration:c,disableWindowBlurListener:p,invertedColors:S,size:g,variant:C});delete w.onUnmount;const R=_e(w),{getRootProps:G,onClickAway:V}=Me(w),q=L=>{K||V(L)},O=y({},Y,{component:v,slots:s,slotProps:i}),[Q,Z]=$("root",{ref:u,className:Oe(R.root,b),elementType:We,externalForwardedProps:O,getSlotProps:G,ownerState:w}),[ee,re]=$("startDecorator",{className:R.startDecorator,elementType:Xe,externalForwardedProps:O,ownerState:w}),[te,ae]=$("endDecorator",{className:R.endDecorator,elementType:Ue,externalForwardedProps:O,ownerState:w}),oe=s.clickAway||Ae;return!h&&J?null:t.jsx(oe,y({onClickAway:q},typeof(i==null?void 0:i.clickAway)=="function"?i.clickAway(w):i==null?void 0:i.clickAway,{children:t.jsxs(Q,y({},Z,{children:[d&&t.jsx(ee,y({},re,{children:d})),x,k&&t.jsx(te,y({},ae,{children:k}))]}))}))}),Ke=Je;function Ge({user:a,project:e,callSheet:u,roles:o}){const{isModalOpen:f,toggleModal:c,modalContent:r}=ne(),{isSnackOpen:m,setIsSnackOpen:x,snackContent:b}=se(),[v,p]=l.useState(!1),k=()=>{switch(r==null?void 0:r.type){case"projectForm":return t.jsx(xe,{onClose:n,resetSignal:v});case"addTask":return t.jsx(we,{onClose:n});case"newLocationForm":return t.jsx(B,{project:e,callSheet:u,onClose:n});case"editLocationForm":return t.jsx(B,{project:e,callSheet:r==null?void 0:r.data,mode:"edit",onClose:n});case"projectImage":return t.jsx(Se,{data:(r==null?void 0:r.imageUrl)||"/images/movie_posters/coming_soon_poster.jpg"});case"generalCallTime":return t.jsx(be,{callSheet:u,data:r==null?void 0:r.data});case"newCallSheetForm":return t.jsx(ve,{user:a,roles:o,project:e,callSheet:u,data:r==null?void 0:r.data,onClose:n});case"editCallSheetForm":return t.jsx(ge,{mode:"edit",data:r==null?void 0:r.data,onClose:n});case"productionSchedule":return t.jsx(ke,{project:e,callSheet:u});case"recipientForm":return t.jsx(M,{roles:o,project:e,callSheet:u,onClose:n});case"editRecipientForm":return t.jsx(M,{roles:o,project:e,callSheet:u,recipient:r==null?void 0:r.data,onClose:n});case"logOut":return t.jsx(ye,{});default:return null}},S=!["logOut"].includes(r==null?void 0:r.type),n=()=>{f&&((r==null?void 0:r.type)==="projectForm"&&p(d=>!d),c(!1))},h=()=>{switch(r==null?void 0:r.type){case"productionSchedule":return{width:"full",height:"full"};default:return{width:"auto",height:"auto"}}},{width:g,height:s}=h(),i=()=>{switch(r==null?void 0:r.type){case"productionSchedule":return"!bg-slate-100";default:return"bg-white"}};return t.jsxs(t.Fragment,{children:[t.jsx(he,{isOpen:f,onClose:n,showCloseButton:S,className:`w-${g} h-${s} ${i()}`,children:k()}),t.jsx(Ke,{autoHideDuration:3e3,anchorOrigin:{vertical:"bottom",horizontal:"right"},open:m,variant:"outlined",size:"lg",color:"success",onClose:(d,C)=>{C!=="clickaway"&&x(!1)},slotProps:{root:{sx:{backgroundColor:"rgb(52 211 153)",borderColor:"rgb(16 185 129)",borderWidth:".15rem",color:"#fff",fontWeight:"bold",bottom:"2rem",right:"2rem",minWidth:"400px",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);"}}},children:b})]})}function Ve({children:a}){l.useState(!1);const[e,u]=l.useState(!1),{expandDrawer:o,drawerWidth:f}=ie(),[c,r]=l.useState(!1);l.useState(!0);const m=()=>{r(!c),c&&o("normal")},x={normal:"w-[25%]",wide:"w-[96%]"};return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:`drawer-overlay ${c?"drawer-overlay-open":""}`,onClick:m}),t.jsxs("div",{className:`fixed top-0 shadow-md right-0 h-full ${c?"translate-x-0":"translate-x-full"} transform transition-all duration-[500ms] ease-in-out z-50 ${x[f]}`,children:[t.jsx("div",{className:`fade-in-delay ${e?"opacity-1":"opacity-0"} ${c?"bg-white text-red-500":"bg-red-500 text-white border-2 border-white"} duration-500 absolute shadow-[-2px_0px_3px_rgba(0,0,0,0.07)] left-[-40px] top-[50%] -translate-y-[50%] w-10 h-10 flex rounded-tl-lg rounded-bl-lg py-10 justify-center items-center cursor-pointer`,onClick:m,children:t.jsx(W,{className:"text-md",icon:ue})}),t.jsx("div",{className:"bg-slate-100 p-8 h-full overflow-auto",children:a})]})]})}function kr({children:a,breadcrumbs:e,project:u,callSheet:o,roles:f,actionClass:c}){const{userData:r}=ce(),{darkModeSetting:m}=le(),x=m==="light"?"text-slate-500":"text-white",b=m==="light"?"text-slate-400":"text-slate-300",v=m==="light"?"hover:text-slate-600":"hover:text-white",[p,k]=l.useState(!1),[S,n]=l.useState(!1);l.useEffect(()=>{k(!0),n(!0)},[]);const h=()=>!e||!Array.isArray(e)?null:t.jsx(t.Fragment,{children:e.map((d,C)=>t.jsxs("span",{className:`flex ${d.className||""} ${x}`,children:[C!==0&&t.jsx("span",{className:`mx-2 my-auto ${b}`,children:" > "})," ",d.url?t.jsx(de,{href:d.url,className:`hover:text-slate-500 duration-500 transition-all hover:underline text-xl ${d.className||""} ${v}`,children:d.label}):t.jsx("span",{className:`text-xl font-bold ${d.className||""} ${x}`,children:d.label})]},C))}),g=a&&a.toolbar,s=a&&a.body,i=a&&a.action;return t.jsx(me,{project:u,children:{portal:t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"absolute z-50",children:[t.jsx(Ge,{user:r,project:u,callSheet:o,roles:f}),i&&t.jsx(Ve,{children:a.action})]}),t.jsxs("div",{className:"w-full h-full pt-[1.5rem] pb-[1.5rem] pl-[7rem] pr-[1.75rem] max-w-[120rem] mx-auto flex flex-col gap-4",children:[t.jsxs("div",{id:"portal-header",className:"w-full flex flex-row justify-between",children:[t.jsx("div",{className:`fade-in h-full my-auto flex items-center ${p?"opacity-1":"opacity-0"}`,children:h()}),g&&t.jsx("div",{className:"h-full mx-auto",children:a.toolbar}),t.jsxs("div",{className:"flex flex-row gap-8 items-center",children:[t.jsx(W,{className:"text-xl text-slate-300",icon:fe}),t.jsx(pe,{href:route("profile.settings"),alt:"User's Profile",className:"h-[3rem] w-[3rem]"})]})]}),t.jsx("div",{id:"portal-body",className:"flex flex-col gap-4 h-full w-full ",children:s&&t.jsx("div",{className:`fade-in-delay h-full ${S?"opacity-1":"opacity-0"}`,children:a.body})})]})]})}})}export{kr as P};
