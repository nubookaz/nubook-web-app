import{l as d,r as l,j as s}from"./app-8b83436b.js";import{l as x}from"./lodash-875d834b.js";import{C as h}from"./CardContainer-da7ef859.js";import{T as f}from"./Textarea-db4c002a.js";import{T as g}from"./Typography-3915937a.js";import"./index.es-ee268f83.js";import"./index-3b70e7e7.js";import"./index-e6ab5b50.js";import"./toPropertyKey-39201a13.js";import"./useSlot-a2532144.js";import"./useForwardedInput-a35c5661.js";import"./FormControlContext-c38d435b.js";import"./ownerWindow-4ddfc24f.js";import"./useEnhancedEffect-99238f73.js";import"./extendSxProp-b0bf4534.js";import"./isMuiElement-db9e5794.js";function K({callSheet:a,isSave:p=!1}){const{setSnackContent:n,setIsSnackOpen:i}=d(),[o,u]=l.useState(a.bulletin||""),r=365,m=l.useCallback(x.debounce(async e=>{try{const t=await axios.put(route("projects.callSheets.update.bulletin",{id:a.project_id,callSheetId:a.id}),{bulletin:e});if(t.status<200||t.status>=300)throw new Error("Failed to update bulletin");setTimeout(()=>{n("Bulletin updated successfully"),i(!0)},600)}catch(t){console.error(t),n("Failed to update bulletin"),i(!1)}},600),[]),c=e=>{let t=e.target.value;t=t.replace(/\n/g,""),t.length>r&&(t=t.substring(0,r)),u(t),p&&m(t)};return s.jsx(h,{header:"Bulletin",children:s.jsx(f,{name:"bulletin",size:"sm",variant:"soft",minRows:4,maxRows:4,value:o,placeholder:"Type anythingâ€¦",className:"!bg-slate-100",maxLength:r,onChange:c,onKeyDown:e=>{e.key==="Enter"&&e.preventDefault()},endDecorator:s.jsxs(g,{level:"body-xs",sx:{ml:"auto"},children:[o.length," / ",r," character(s) (",r-o.length," remaining)"]})})})}export{K as default};
