import{r as d,j as a,c as ne,k as se,l as ie,d as ce}from"./app-d6201cb1.js";import{F as W}from"./index.es-4ddfc134.js";import{c as le,d as de}from"./index-d825d59e.js";import{A as ue}from"./AuthenticatedLayout-ee0d9e09.js";import fe from"./ProfilePicture-2cfca26c.js";import{M as me}from"./Modal-aea4b1df.js";import pe from"./CreateProject-ed42442c.js";import he from"./CreateCallSheet-f425acd9.js";import xe from"./UpdateCallSheet-f864231a.js";import ve from"./GeneralCallTimeForm-eab367d2.js";import ge from"./CallSheetProductionSchedule-e0a3f97b.js";import B from"./CreateRecipient-dc07c385.js";import be from"./ProjectImagePreview-651409a5.js";import ke from"./LogOutForm-5c7f1fd7.js";import M from"./LocationForm-9fb7b88a.js";import Se from"./AddTaskModal-0c42d99f.js";import{a as y,_ as ye}from"./toPropertyKey-0671445a.js";import{b as we,E as _,g as Ce,a as je,k as X,s as P,u as Ee,c as z,f as De,h as C,d as Re}from"./useSlot-958e930c.js";import{r as Oe}from"./styleUtils-354e910e.js";import{a as Le,b as ze}from"./Autocomplete-a874b033.js";import{u as Ne}from"./useIsFocusVisible-38d1530f.js";import{u as $}from"./useEventCallback-4bbe510b.js";import{o as N}from"./useEnhancedEffect-8ef057d9.js";function T(t){return t.substring(2).toLowerCase()}function $e(t,e){return e.documentElement.clientWidth<t.clientX||e.documentElement.clientHeight<t.clientY}function Pe(t){const{children:e,disableReactTree:u=!1,mouseEvent:o="onClick",onClickAway:f,touchEvent:s="onTouchEnd"}=t,r=d.useRef(!1),m=d.useRef(null),h=d.useRef(!1),b=d.useRef(!1);d.useEffect(()=>(setTimeout(()=>{h.current=!0},0),()=>{h.current=!1}),[]);const v=we(e.ref,m),p=$(n=>{const l=b.current;b.current=!1;const g=N(m.current);if(!h.current||!m.current||"clientX"in n&&$e(n,g))return;if(r.current){r.current=!1;return}let i;n.composedPath?i=n.composedPath().indexOf(m.current)>-1:i=!g.documentElement.contains(n.target)||m.current.contains(n.target),!i&&(u||!l)&&f(n)}),k=n=>l=>{b.current=!0;const g=e.props[n];g&&g(l)},S={ref:v};return s!==!1&&(S[s]=k(s)),d.useEffect(()=>{if(s!==!1){const n=T(s),l=N(m.current),g=()=>{r.current=!0};return l.addEventListener(n,p),l.addEventListener("touchmove",g),()=>{l.removeEventListener(n,p),l.removeEventListener("touchmove",g)}}},[p,s]),o!==!1&&(S[o]=k(o)),d.useEffect(()=>{if(o!==!1){const n=T(o),l=N(m.current);return l.addEventListener(n,p),()=>{l.removeEventListener(n,p)}}},[p,o]),a.jsx(d.Fragment,{children:d.cloneElement(e,S)})}function Fe(t={}){const{autoHideDuration:e=null,disableWindowBlurListener:u=!1,onClose:o,open:f,resumeHideDuration:s}=t,r=Ne();d.useEffect(()=>{if(!f)return;function i(c){c.defaultPrevented||(c.key==="Escape"||c.key==="Esc")&&(o==null||o(c,"escapeKeyDown"))}return document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i)}},[f,o]);const m=$((i,c)=>{o==null||o(i,c)}),h=$(i=>{!o||i==null||r.start(i,()=>{m(null,"timeout")})});d.useEffect(()=>(f&&h(e),r.clear),[f,e,h,r]);const b=i=>{o==null||o(i,"clickaway")},v=r.clear,p=d.useCallback(()=>{e!=null&&h(s??e*.5)},[e,s,h]),k=i=>c=>{const x=i.onBlur;x==null||x(c),p()},S=i=>c=>{const x=i.onFocus;x==null||x(c),v()},n=i=>c=>{const x=i.onMouseEnter;x==null||x(c),v()},l=i=>c=>{const x=i.onMouseLeave;x==null||x(c),p()};return d.useEffect(()=>{if(!u&&f)return window.addEventListener("focus",p),window.addEventListener("blur",v),()=>{window.removeEventListener("focus",p),window.removeEventListener("blur",v)}},[u,f,p,v]),{getRootProps:(i={})=>{const c=y({},_(t),_(i));return y({role:"presentation"},i,c,{onBlur:k(c),onFocus:S(c),onMouseEnter:n(c),onMouseLeave:l(c)})},onClickAway:b}}function Ae(t){return Ce("MuiSnackbar",t)}je("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","colorPrimary","colorDanger","colorNeutral","colorSuccess","colorWarning","endDecorator","sizeSm","sizeMd","sizeLg","startDecorator","variantPlain","variantOutlined","variantSoft","variantSolid"]);const Be=["anchorOrigin","animationDuration","autoHideDuration","color","children","className","component","disableWindowBlurListener","endDecorator","invertedColors","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","onUnmount","open","resumeHideDuration","size","slots","slotProps","startDecorator","variant"];let U=t=>t,I,H;const Me=t=>{const{variant:e,color:u,size:o,anchorOrigin:f}=t,s={root:["root",o&&`size${C(o)}`,u&&`color${C(u)}`,e&&`variant${C(e)}`,`anchorOrigin${C(f.vertical)}${C(f.horizontal)}`],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return Re(s,Ae,{})},_e=X(I||(I=U`
  0% {
    transform: translateX(var(--Snackbar-translateX, 0px)) translateY(calc(var(--_Snackbar-anchorBottom, 1) * 100%));
    opacity: 0;
  }
  50% {
    opacity: 1;
  }
  100% {
    transform: translateX(var(--Snackbar-translateX, 0px)) translateY(0);
  }
`)),Te=X(H||(H=U`
  0% {
    transform: translateX(var(--Snackbar-translateX, 0px)) translateY(0);
    opacity: 1;
  }
  100% {
    transform: translateX(var(--Snackbar-translateX, 0px)) translateY(calc(var(--_Snackbar-anchorBottom, 1) * 100%));
    opacity: 0;
  }
`)),Ie=P("div",{name:"JoySnackbar",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t,ownerState:e})=>{var u,o,f,s,r,m,h;const{p:b,padding:v,borderRadius:p}=Oe({theme:t,ownerState:e},["p","padding","borderRadius"]);return[y({"--Snackbar-radius":t.vars.radius.sm,"--Snackbar-decoratorChildRadius":"max((var(--Snackbar-radius) - var(--variant-borderWidth, 0px)) - var(--Snackbar-padding), min(var(--Snackbar-padding) + var(--variant-borderWidth, 0px), var(--Snackbar-radius) / 2))","--Button-minHeight":"var(--Snackbar-decoratorChildHeight)","--IconButton-size":"var(--Snackbar-decoratorChildHeight)","--Button-radius":"var(--Snackbar-decoratorChildRadius)","--IconButton-radius":"var(--Snackbar-decoratorChildRadius)","--Icon-color":"currentColor"},e.size==="sm"&&{"--Snackbar-padding":"0.75rem","--Snackbar-inset":"0.5rem","--Snackbar-decoratorChildHeight":"1.5rem","--Icon-fontSize":t.vars.fontSize.xl,gap:"0.5rem"},e.size==="md"&&{"--Snackbar-padding":"1rem","--Snackbar-inset":"0.75rem","--Snackbar-decoratorChildHeight":"2rem","--Icon-fontSize":t.vars.fontSize.xl,gap:"0.625rem"},e.size==="lg"&&{"--Snackbar-padding":"1.25rem","--Snackbar-inset":"1rem","--Snackbar-decoratorChildHeight":"2.375rem","--Icon-fontSize":t.vars.fontSize.xl2,gap:"0.875rem"},{zIndex:t.vars.zIndex.snackbar,position:"fixed",display:"flex",alignItems:"center",minWidth:300,top:((u=e.anchorOrigin)==null?void 0:u.vertical)==="top"?"var(--Snackbar-inset)":void 0,left:((o=e.anchorOrigin)==null?void 0:o.horizontal)==="left"?"var(--Snackbar-inset)":void 0,bottom:((f=e.anchorOrigin)==null?void 0:f.vertical)==="bottom"?"var(--Snackbar-inset)":void 0,right:((s=e.anchorOrigin)==null?void 0:s.horizontal)==="right"?"var(--Snackbar-inset)":void 0},((r=e.anchorOrigin)==null?void 0:r.horizontal)==="center"&&{"--Snackbar-translateX":"-50%",left:"50%",transform:"translateX(var(--Snackbar-translateX))"},((m=e.anchorOrigin)==null?void 0:m.vertical)==="top"&&{"--_Snackbar-anchorBottom":"-1"},{animation:`${_e} ${e.animationDuration}ms forwards`},!e.open&&{animationName:Te},{boxShadow:t.vars.shadow.lg,backgroundColor:t.vars.palette.background.surface,padding:"var(--Snackbar-padding)",borderRadius:"var(--Snackbar-radius)"},t.typography[`body-${{sm:"xs",md:"sm",lg:"md"}[e.size]}`],e.variant==="solid"&&e.color&&e.invertedColors&&ze(e.color)(t),e.variant==="soft"&&e.color&&e.invertedColors&&Le(e.color)(t),(h=t.variants[e.variant])==null?void 0:h[e.color]),b!==void 0&&{"--Snackbar-padding":b},v!==void 0&&{"--Snackbar-padding":v},p!==void 0&&{"--Snackbar-radius":p}]}),He=P("span",{name:"JoySnackbar",slot:"StartDecorator",overridesResolver:(t,e)=>e.startDecorator})({display:"inherit",flex:"none"}),We=P("span",{name:"JoySnackbar",slot:"EndDecorator",overridesResolver:(t,e)=>e.endDecorator})({display:"inherit",flex:"none",marginLeft:"auto"}),Xe={vertical:"bottom",horizontal:"right"},Ue=d.forwardRef(function(e,u){const o=Ee({props:e,name:"JoySnackbar"}),{anchorOrigin:f=Xe,animationDuration:s=300,autoHideDuration:r=null,color:m="neutral",children:h,className:b,component:v,disableWindowBlurListener:p=!1,endDecorator:k,invertedColors:S=!1,onUnmount:n,open:l,size:g="md",slots:i={},slotProps:c,startDecorator:x,variant:j="outlined"}=o,Y=ye(o,Be),[J,F]=d.useState(!0),[K,E]=d.useState(!1),D=d.useRef(n);D.current=n,d.useEffect(()=>{if(l)E(!1),F(!1);else{E(!0);const L=setTimeout(()=>{var A;F(!0),E(!1),(A=D.current)==null||A.call(D)},s);return()=>{clearTimeout(L)}}},[l,s]);const w=y({},o,{anchorOrigin:f,autoHideDuration:r,color:m,animationDuration:s,disableWindowBlurListener:p,invertedColors:S,size:g,variant:j});delete w.onUnmount;const R=Me(w),{getRootProps:G,onClickAway:V}=Fe(w),q=L=>{K||V(L)},O=y({},Y,{component:v,slots:i,slotProps:c}),[Q,Z]=z("root",{ref:u,className:De(R.root,b),elementType:Ie,externalForwardedProps:O,getSlotProps:G,ownerState:w}),[ee,re]=z("startDecorator",{className:R.startDecorator,elementType:He,externalForwardedProps:O,ownerState:w}),[ae,te]=z("endDecorator",{className:R.endDecorator,elementType:We,externalForwardedProps:O,ownerState:w}),oe=i.clickAway||Pe;return!l&&J?null:a.jsx(oe,y({onClickAway:q},typeof(c==null?void 0:c.clickAway)=="function"?c.clickAway(w):c==null?void 0:c.clickAway,{children:a.jsxs(Q,y({},Z,{children:[x&&a.jsx(ee,y({},re,{children:x})),h,k&&a.jsx(ae,y({},te,{children:k}))]}))}))}),Ye=Ue;function Je({user:t,project:e,callSheet:u,roles:o}){const{isModalOpen:f,toggleModal:s,modalContent:r}=ne(),{isSnackOpen:m,setIsSnackOpen:h,snackContent:b}=se(),[v,p]=d.useState(!1),k=()=>{switch(r==null?void 0:r.type){case"projectForm":return a.jsx(pe,{onClose:n,resetSignal:v});case"addTask":return a.jsx(Se,{onClose:n});case"newLocationForm":return a.jsx(M,{project:e,callSheet:u,onClose:n});case"editLocationForm":return a.jsx(M,{project:e,callSheet:r==null?void 0:r.data,mode:"edit",onClose:n});case"projectImage":return a.jsx(be,{data:(r==null?void 0:r.imageUrl)||"/images/movie_posters/coming_soon_poster.jpg"});case"generalCallTime":return a.jsx(ve,{callSheet:u,data:r==null?void 0:r.data});case"newCallSheetForm":return a.jsx(he,{user:t,roles:o,project:e,callSheet:u,data:r==null?void 0:r.data,onClose:n});case"editCallSheetForm":return a.jsx(xe,{mode:"edit",data:r==null?void 0:r.data,onClose:n});case"productionSchedule":return a.jsx(ge,{project:e,callSheet:u});case"recipientForm":return a.jsx(B,{roles:o,project:e,callSheet:u,onClose:n});case"editRecipientForm":return a.jsx(B,{roles:o,project:e,callSheet:u,recipient:r==null?void 0:r.data,onClose:n});case"logOut":return a.jsx(ke,{});default:return null}},S=!["logOut"].includes(r==null?void 0:r.type),n=()=>{f&&((r==null?void 0:r.type)==="projectForm"&&p(x=>!x),s(!1))},l=()=>{switch(r==null?void 0:r.type){case"productionSchedule":return{width:"full",height:"full"};default:return{width:"auto",height:"auto"}}},{width:g,height:i}=l(),c=()=>{switch(r==null?void 0:r.type){case"productionSchedule":return"!bg-slate-100";default:return"bg-white"}};return a.jsxs(a.Fragment,{children:[a.jsx(me,{isOpen:f,onClose:n,showCloseButton:S,className:`w-${g} h-${i} ${c()}`,children:k()}),a.jsx(Ye,{autoHideDuration:3e3,anchorOrigin:{vertical:"bottom",horizontal:"right"},open:m,variant:"outlined",size:"lg",color:"success",onClose:(x,j)=>{j!=="clickaway"&&h(!1)},slotProps:{root:{sx:{backgroundColor:"rgb(52 211 153)",borderColor:"rgb(16 185 129)",borderWidth:".15rem",color:"#fff",fontWeight:"bold",bottom:"2rem",right:"2rem",minWidth:"400px",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);"}}},children:b})]})}function Ke({children:t}){d.useState(!1);const[e,u]=d.useState(!1),{expandDrawer:o,drawerWidth:f}=ie(),[s,r]=d.useState(!1);d.useState(!0);const m=()=>{r(!s),s&&o("normal")},h={normal:"w-[25%]",wide:"w-[96%]"};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:`drawer-overlay ${s?"drawer-overlay-open":""}`,onClick:m}),a.jsxs("div",{className:`fixed top-0 shadow-md right-0 h-full ${s?"translate-x-0":"translate-x-full"} transform transition-all duration-[500ms] ease-in-out z-50 ${h[f]}`,children:[a.jsx("div",{className:`fade-in-delay ${e?"opacity-1":"opacity-0"} ${s?"bg-white text-red-500":"bg-red-500 text-white border-2 border-white"} duration-500 absolute shadow-[-2px_0px_3px_rgba(0,0,0,0.07)] left-[-40px] top-[50%] -translate-y-[50%] w-10 h-10 flex rounded-tl-lg rounded-bl-lg py-10 justify-center items-center cursor-pointer`,onClick:m,children:a.jsx(W,{className:"text-md",icon:le})}),a.jsx("div",{className:"bg-slate-100 p-8 h-full overflow-auto",children:t})]})]})}function gr({children:t,breadcrumbs:e,project:u,callSheet:o,user:f,roles:s,actionClass:r}){const[m,h]=d.useState(!1),[b,v]=d.useState(!1);d.useEffect(()=>{h(!0),v(!0)},[]);const p=()=>!e||!Array.isArray(e)?null:a.jsx(a.Fragment,{children:e.map((l,g)=>a.jsxs("span",{className:`text-slate-500 flex ${l.className||""}`,children:[g!==0&&a.jsx("span",{className:"mx-2 my-auto text-slate-300",children:" > "})," ",l.url?a.jsx(ce,{href:l.url,className:`text-slate-300 hover:text-slate-500 duration-500 transition-all hover:underline text-xl ${l.className||""}`,children:l.label}):a.jsx("span",{className:`text-xl text-gray-500 font-bold ${l.className||""}`,children:l.label})]},g))}),k=t&&t.toolbar,S=t&&t.body,n=t&&t.action;return a.jsx(ue,{project:u,children:{portal:a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"absolute z-50",children:[a.jsx(Je,{user:f,project:u,callSheet:o,roles:s}),n&&a.jsx(Ke,{children:t.action})]}),a.jsxs("div",{className:"w-full h-full pt-[1.5rem] pb-[1.5rem] pl-[7rem] pr-[1.75rem] max-w-[120rem] mx-auto flex flex-col gap-4",children:[a.jsxs("div",{id:"portal-header",className:"w-full flex flex-row justify-between",children:[a.jsx("div",{className:`fade-in h-full my-auto flex items-center ${m?"opacity-1":"opacity-0"}`,children:p()}),a.jsxs("div",{className:"flex flex-row gap-8 items-center",children:[a.jsx(W,{className:"text-xl text-slate-300",icon:de}),a.jsx(fe,{href:route("profile.settings"),alt:"User's Profile",className:"h-[3rem] w-[3rem]"})]})]}),a.jsxs("div",{id:"portal-body",className:"flex flex-col gap-4 h-full w-full ",children:[k&&a.jsx("div",{className:"w-full h-full max-h-[2.5rem] max-w-[80%] mx-auto",children:t.toolbar}),S&&a.jsx("div",{className:`fade-in-delay h-full ${b?"opacity-1":"opacity-0"}`,children:t.body})]})]})]})}})}export{gr as P,Ye as S};
