import{r as l,j as r,i as se,b as ie,k as ce,d as le}from"./app-eefe6961.js";import{F as W}from"./index.es-6f9cfa5f.js";import{p as ue,q as de}from"./index-1074990b.js";import{A as fe}from"./AuthenticatedLayout-5c330e09.js";import me from"./ProfilePicture-c04d1aab.js";import{M as pe}from"./Modal-f577344b.js";import{P as he}from"./ProjectForm-3e4e56c7.js";import A from"./CallSheetForm-50df9519.js";import xe from"./GeneralCallTimeForm-fead2db1.js";import ve from"./CallSheetProductionSchedule-051fe2da.js";import B from"./CallSheetRecipientForm-f1f0461b.js";import ge from"./ProjectImagePreview-17de09c6.js";import be from"./LogOutForm-2b450e55.js";import _ from"./LocationForm-76bd8284.js";import{a as S,_ as ke}from"./toPropertyKey-a23e7eac.js";import{b as ye,E as M,g as Se,a as we,k as X,s as N,u as Ce,c as L,f as je,h as C,d as Ee}from"./useSlot-a85726b4.js";import{r as De}from"./styleUtils-8a36875c.js";import{a as Re,b as Oe}from"./colorInversionUtils-4d37075b.js";import{u as Le}from"./useIsFocusVisible-a86ea076.js";import{u as F}from"./useEventCallback-9096ac69.js";import{o as z}from"./useEnhancedEffect-346992f7.js";function T(a){return a.substring(2).toLowerCase()}function ze(a,e){return e.documentElement.clientWidth<a.clientX||e.documentElement.clientHeight<a.clientY}function Fe(a){const{children:e,disableReactTree:u=!1,mouseEvent:o="onClick",onClickAway:f,touchEvent:n="onTouchEnd"}=a,t=l.useRef(!1),m=l.useRef(null),h=l.useRef(!1),b=l.useRef(!1);l.useEffect(()=>(setTimeout(()=>{h.current=!0},0),()=>{h.current=!1}),[]);const v=ye(e.ref,m),p=F(d=>{const c=b.current;b.current=!1;const g=z(m.current);if(!h.current||!m.current||"clientX"in d&&ze(d,g))return;if(t.current){t.current=!1;return}let i;d.composedPath?i=d.composedPath().indexOf(m.current)>-1:i=!g.documentElement.contains(d.target)||m.current.contains(d.target),!i&&(u||!c)&&f(d)}),x=d=>c=>{b.current=!0;const g=e.props[d];g&&g(c)},y={ref:v};return n!==!1&&(y[n]=x(n)),l.useEffect(()=>{if(n!==!1){const d=T(n),c=z(m.current),g=()=>{t.current=!0};return c.addEventListener(d,p),c.addEventListener("touchmove",g),()=>{c.removeEventListener(d,p),c.removeEventListener("touchmove",g)}}},[p,n]),o!==!1&&(y[o]=x(o)),l.useEffect(()=>{if(o!==!1){const d=T(o),c=z(m.current);return c.addEventListener(d,p),()=>{c.removeEventListener(d,p)}}},[p,o]),r.jsx(l.Fragment,{children:l.cloneElement(e,y)})}function Ne(a={}){const{autoHideDuration:e=null,disableWindowBlurListener:u=!1,onClose:o,open:f,resumeHideDuration:n}=a,t=Le();l.useEffect(()=>{if(!f)return;function i(s){s.defaultPrevented||(s.key==="Escape"||s.key==="Esc")&&(o==null||o(s,"escapeKeyDown"))}return document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i)}},[f,o]);const m=F((i,s)=>{o==null||o(i,s)}),h=F(i=>{!o||i==null||t.start(i,()=>{m(null,"timeout")})});l.useEffect(()=>(f&&h(e),t.clear),[f,e,h,t]);const b=i=>{o==null||o(i,"clickaway")},v=t.clear,p=l.useCallback(()=>{e!=null&&h(n??e*.5)},[e,n,h]),x=i=>s=>{const k=i.onBlur;k==null||k(s),p()},y=i=>s=>{const k=i.onFocus;k==null||k(s),v()},d=i=>s=>{const k=i.onMouseEnter;k==null||k(s),v()},c=i=>s=>{const k=i.onMouseLeave;k==null||k(s),p()};return l.useEffect(()=>{if(!u&&f)return window.addEventListener("focus",p),window.addEventListener("blur",v),()=>{window.removeEventListener("focus",p),window.removeEventListener("blur",v)}},[u,f,p,v]),{getRootProps:(i={})=>{const s=S({},M(a),M(i));return S({role:"presentation"},i,s,{onBlur:x(s),onFocus:y(s),onMouseEnter:d(s),onMouseLeave:c(s)})},onClickAway:b}}function Pe({children:a}){l.useState(!1);const[e,u]=l.useState(!1),{expandDrawer:o,drawerWidth:f}=se(),[n,t]=l.useState(!1);l.useState(!0);const m=()=>{t(!n),n&&o("normal")},h={normal:"w-[25%]",wide:"w-[96%]"};return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`drawer-overlay ${n?"drawer-overlay-open":""}`,onClick:m}),r.jsxs("div",{className:`fixed top-0 shadow-md right-0 h-full ${n?"translate-x-0":"translate-x-full"} transform transition-all duration-[500ms] ease-in-out z-50 ${h[f]}`,children:[r.jsx("div",{className:`fade-in-delay ${e?"opacity-1":"opacity-0"} ${n?"bg-white text-red-500":"bg-red-500 text-white border-2 border-white"} duration-500 absolute shadow-[-2px_0px_3px_rgba(0,0,0,0.07)] left-[-40px] top-[50%] -translate-y-[50%] w-10 h-10 flex rounded-tl-lg rounded-bl-lg py-10 justify-center items-center cursor-pointer`,onClick:m,children:r.jsx(W,{className:"text-md",icon:ue})}),r.jsx("div",{className:"bg-slate-100 p-8 h-full overflow-auto",children:a})]})]})}function $e(a){return Se("MuiSnackbar",a)}we("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","colorPrimary","colorDanger","colorNeutral","colorSuccess","colorWarning","endDecorator","sizeSm","sizeMd","sizeLg","startDecorator","variantPlain","variantOutlined","variantSoft","variantSolid"]);const Ae=["anchorOrigin","animationDuration","autoHideDuration","color","children","className","component","disableWindowBlurListener","endDecorator","invertedColors","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","onUnmount","open","resumeHideDuration","size","slots","slotProps","startDecorator","variant"];let U=a=>a,I,H;const Be=a=>{const{variant:e,color:u,size:o,anchorOrigin:f}=a,n={root:["root",o&&`size${C(o)}`,u&&`color${C(u)}`,e&&`variant${C(e)}`,`anchorOrigin${C(f.vertical)}${C(f.horizontal)}`],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return Ee(n,$e,{})},_e=X(I||(I=U`
  0% {
    transform: translateX(var(--Snackbar-translateX, 0px)) translateY(calc(var(--_Snackbar-anchorBottom, 1) * 100%));
    opacity: 0;
  }
  50% {
    opacity: 1;
  }
  100% {
    transform: translateX(var(--Snackbar-translateX, 0px)) translateY(0);
  }
`)),Me=X(H||(H=U`
  0% {
    transform: translateX(var(--Snackbar-translateX, 0px)) translateY(0);
    opacity: 1;
  }
  100% {
    transform: translateX(var(--Snackbar-translateX, 0px)) translateY(calc(var(--_Snackbar-anchorBottom, 1) * 100%));
    opacity: 0;
  }
`)),Te=N("div",{name:"JoySnackbar",slot:"Root",overridesResolver:(a,e)=>e.root})(({theme:a,ownerState:e})=>{var u,o,f,n,t,m,h;const{p:b,padding:v,borderRadius:p}=De({theme:a,ownerState:e},["p","padding","borderRadius"]);return[S({"--Snackbar-radius":a.vars.radius.sm,"--Snackbar-decoratorChildRadius":"max((var(--Snackbar-radius) - var(--variant-borderWidth, 0px)) - var(--Snackbar-padding), min(var(--Snackbar-padding) + var(--variant-borderWidth, 0px), var(--Snackbar-radius) / 2))","--Button-minHeight":"var(--Snackbar-decoratorChildHeight)","--IconButton-size":"var(--Snackbar-decoratorChildHeight)","--Button-radius":"var(--Snackbar-decoratorChildRadius)","--IconButton-radius":"var(--Snackbar-decoratorChildRadius)","--Icon-color":"currentColor"},e.size==="sm"&&{"--Snackbar-padding":"0.75rem","--Snackbar-inset":"0.5rem","--Snackbar-decoratorChildHeight":"1.5rem","--Icon-fontSize":a.vars.fontSize.xl,gap:"0.5rem"},e.size==="md"&&{"--Snackbar-padding":"1rem","--Snackbar-inset":"0.75rem","--Snackbar-decoratorChildHeight":"2rem","--Icon-fontSize":a.vars.fontSize.xl,gap:"0.625rem"},e.size==="lg"&&{"--Snackbar-padding":"1.25rem","--Snackbar-inset":"1rem","--Snackbar-decoratorChildHeight":"2.375rem","--Icon-fontSize":a.vars.fontSize.xl2,gap:"0.875rem"},{zIndex:a.vars.zIndex.snackbar,position:"fixed",display:"flex",alignItems:"center",minWidth:300,top:((u=e.anchorOrigin)==null?void 0:u.vertical)==="top"?"var(--Snackbar-inset)":void 0,left:((o=e.anchorOrigin)==null?void 0:o.horizontal)==="left"?"var(--Snackbar-inset)":void 0,bottom:((f=e.anchorOrigin)==null?void 0:f.vertical)==="bottom"?"var(--Snackbar-inset)":void 0,right:((n=e.anchorOrigin)==null?void 0:n.horizontal)==="right"?"var(--Snackbar-inset)":void 0},((t=e.anchorOrigin)==null?void 0:t.horizontal)==="center"&&{"--Snackbar-translateX":"-50%",left:"50%",transform:"translateX(var(--Snackbar-translateX))"},((m=e.anchorOrigin)==null?void 0:m.vertical)==="top"&&{"--_Snackbar-anchorBottom":"-1"},{animation:`${_e} ${e.animationDuration}ms forwards`},!e.open&&{animationName:Me},{boxShadow:a.vars.shadow.lg,backgroundColor:a.vars.palette.background.surface,padding:"var(--Snackbar-padding)",borderRadius:"var(--Snackbar-radius)"},a.typography[`body-${{sm:"xs",md:"sm",lg:"md"}[e.size]}`],e.variant==="solid"&&e.color&&e.invertedColors&&Oe(e.color)(a),e.variant==="soft"&&e.color&&e.invertedColors&&Re(e.color)(a),(h=a.variants[e.variant])==null?void 0:h[e.color]),b!==void 0&&{"--Snackbar-padding":b},v!==void 0&&{"--Snackbar-padding":v},p!==void 0&&{"--Snackbar-radius":p}]}),Ie=N("span",{name:"JoySnackbar",slot:"StartDecorator",overridesResolver:(a,e)=>e.startDecorator})({display:"inherit",flex:"none"}),He=N("span",{name:"JoySnackbar",slot:"EndDecorator",overridesResolver:(a,e)=>e.endDecorator})({display:"inherit",flex:"none",marginLeft:"auto"}),We={vertical:"bottom",horizontal:"right"},Xe=l.forwardRef(function(e,u){const o=Ce({props:e,name:"JoySnackbar"}),{anchorOrigin:f=We,animationDuration:n=300,autoHideDuration:t=null,color:m="neutral",children:h,className:b,component:v,disableWindowBlurListener:p=!1,endDecorator:x,invertedColors:y=!1,onUnmount:d,open:c,size:g="md",slots:i={},slotProps:s,startDecorator:k,variant:Y="outlined"}=o,J=ke(o,Ae),[K,P]=l.useState(!0),[q,j]=l.useState(!1),E=l.useRef(d);E.current=d,l.useEffect(()=>{if(c)j(!1),P(!1);else{j(!0);const O=setTimeout(()=>{var $;P(!0),j(!1),($=E.current)==null||$.call(E)},n);return()=>{clearTimeout(O)}}},[c,n]);const w=S({},o,{anchorOrigin:f,autoHideDuration:t,color:m,animationDuration:n,disableWindowBlurListener:p,invertedColors:y,size:g,variant:Y});delete w.onUnmount;const D=Be(w),{getRootProps:G,onClickAway:V}=Ne(w),Q=O=>{q||V(O)},R=S({},J,{component:v,slots:i,slotProps:s}),[Z,ee]=L("root",{ref:u,className:je(D.root,b),elementType:Te,externalForwardedProps:R,getSlotProps:G,ownerState:w}),[re,ae]=L("startDecorator",{className:D.startDecorator,elementType:Ie,externalForwardedProps:R,ownerState:w}),[te,oe]=L("endDecorator",{className:D.endDecorator,elementType:He,externalForwardedProps:R,ownerState:w}),ne=i.clickAway||Fe;return!c&&K?null:r.jsx(ne,S({onClickAway:Q},typeof(s==null?void 0:s.clickAway)=="function"?s.clickAway(w):s==null?void 0:s.clickAway,{children:r.jsxs(Z,S({},ee,{children:[k&&r.jsx(re,S({},ae,{children:k})),h,x&&r.jsx(te,S({},oe,{children:x}))]}))}))}),Ue=Xe;function Ye({user:a,project:e,callSheet:u,roles:o}){const{isModalOpen:f,toggleModal:n,modalContent:t}=ie(),{isSnackOpen:m,setIsSnackOpen:h,snackContent:b}=ce(),v=()=>{switch(t==null?void 0:t.type){case"projectForm":return r.jsx(he,{});case"newLocationForm":return r.jsx(_,{project:e,callSheet:u,onClose:x});case"editLocationForm":return r.jsx(_,{project:e,callSheet:t==null?void 0:t.data,mode:"edit",onClose:x});case"projectImage":return r.jsx(ge,{data:(t==null?void 0:t.imageUrl)||"/images/movie_posters/coming_soon_poster.jpg"});case"generalCallTime":return r.jsx(xe,{callSheet:u,data:t==null?void 0:t.data});case"newCallSheetForm":return r.jsx(A,{user:a,roles:o,project:e,callSheet:u,formType:t==null?void 0:t.data,onClose:x});case"editCallSheetForm":return r.jsx(A,{user:a,roles:o,project:e,callSheet:u,mode:"edit",formType:t==null?void 0:t.data,onClose:x});case"productionSchedule":return r.jsx(ve,{project:e,callSheet:u});case"recipientForm":return r.jsx(B,{roles:o,project:e,callSheet:u,onClose:x});case"editRecipientForm":return r.jsx(B,{roles:o,project:e,callSheet:u,recipient:t==null?void 0:t.data,onClose:x});case"logOut":return r.jsx(be,{});default:return null}},p=!["logOut"].includes(t==null?void 0:t.type),x=()=>{f&&n(!1)},y=()=>{switch(t==null?void 0:t.type){case"productionSchedule":return{width:"full",height:"full"};default:return{width:"auto",height:"auto"}}},{width:d,height:c}=y(),g=()=>{switch(t==null?void 0:t.type){case"productionSchedule":return"!bg-slate-100";default:return"bg-white"}};return r.jsxs(r.Fragment,{children:[r.jsx(pe,{isOpen:f,onClose:x,showCloseButton:p,className:`w-${d} h-${c} ${g()}`,children:v()}),r.jsx(Ue,{autoHideDuration:3e3,anchorOrigin:{vertical:"bottom",horizontal:"right"},open:m,variant:"outlined",size:"lg",color:"success",onClose:(i,s)=>{s!=="clickaway"&&h(!1)},slotProps:{root:{sx:{backgroundColor:"rgb(52 211 153)",borderColor:"rgb(16 185 129)",borderWidth:".15rem",color:"#fff",fontWeight:"bold",bottom:"2rem",right:"2rem",minWidth:"400px",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);"}}},children:b})]})}function pr({children:a,breadcrumbs:e,project:u,callSheet:o,user:f,roles:n,actionClass:t}){const[m,h]=l.useState(!1),[b,v]=l.useState(!1);l.useEffect(()=>{h(!0),v(!0)},[]);const p=()=>!e||!Array.isArray(e)?null:r.jsx(r.Fragment,{children:e.map((c,g)=>r.jsxs("span",{className:`text-slate-500 flex ${c.className||""}`,children:[g!==0&&r.jsx("span",{className:"mx-2 my-auto text-slate-300",children:" > "})," ",c.url?r.jsx(le,{href:c.url,className:`text-slate-300 hover:text-slate-500 duration-500 transition-all hover:underline text-xl ${c.className||""}`,children:c.label}):r.jsx("span",{className:`text-xl text-gray-500 font-bold ${c.className||""}`,children:c.label})]},g))}),x=a&&a.toolbar,y=a&&a.body,d=a&&a.action;return r.jsx(fe,{project:u,children:{portal:r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"absolute z-50",children:[r.jsx(Ye,{user:f,project:u,callSheet:o,roles:n}),d&&r.jsx(Pe,{children:a.action})]}),r.jsxs("div",{className:"w-full h-full pt-[1.5rem] pb-[1.5rem] pl-[7rem] pr-[1.75rem] max-w-[120rem] mx-auto flex flex-col gap-4",children:[r.jsxs("div",{id:"portal-header",className:"w-full flex flex-row justify-between",children:[r.jsx("div",{className:`fade-in h-full my-auto flex items-center ${m?"opacity-1":"opacity-0"}`,children:p()}),r.jsxs("div",{className:"flex flex-row gap-8 items-center",children:[r.jsx(W,{className:"text-xl text-slate-300",icon:de}),r.jsx(me,{href:route("profile.settings"),alt:"User's Profile",className:"h-[3rem] w-[3rem]"})]})]}),r.jsxs("div",{id:"portal-body",className:"flex flex-col gap-4 h-full w-full ",children:[x&&r.jsx("div",{className:"w-full h-full max-h-[2.5rem] max-w-[80%] mx-auto",children:a.toolbar}),y&&r.jsx("div",{className:`fade-in-delay h-full ${b?"opacity-1":"opacity-0"}`,children:a.body})]})]})]})}})}export{pr as P,Ue as S};
