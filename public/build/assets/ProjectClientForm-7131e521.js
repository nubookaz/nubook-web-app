import{r as u,j as t,W as N}from"./app-d6201cb1.js";import{i as d}from"./Form-792c5f5e.js";import{r as b,i as C}from"./createSvgIcon-1017b8ba.js";import{F as I}from"./FormControl-bcb6d899.js";import{A as L,c as D,d as O}from"./Autocomplete-a874b033.js";import{a as x,_ as A}from"./toPropertyKey-0671445a.js";import{g as F,a as $,s as P,u as S,c as z,f as R,d as E}from"./useSlot-958e930c.js";import"./extendSxProp-0a396769.js";import"./ownerWindow-8eff4865.js";import"./useEnhancedEffect-8ef057d9.js";import"./isMuiElement-2d2d89c3.js";import"./useIsFocusVisible-38d1530f.js";import"./useControlled-565a38ff.js";import"./useEventCallback-4bbe510b.js";import"./FormControlContext-906cd091.js";import"./createSvgIcon-ba04faf8.js";import"./variantColorInheritance-3035274c.js";import"./CircularProgress-f468e6ba.js";import"./useForwardedInput-ffe731dd.js";import"./ListItemButton-596ed1f7.js";import"./styleUtils-354e910e.js";import"./RadioGroupContext-f4fb6991.js";import"./Chip-fc48afba.js";import"./Popper-e501f2f6.js";const M=u.createContext("horizontal"),B=M;function T(r){return F("MuiListItemDecorator",r)}$("MuiListItemDecorator",["root"]);const W=["component","className","children","slots","slotProps"],q=()=>E({root:["root"]},T,{}),J=P("span",{name:"JoyListItemDecorator",slot:"Root",overridesResolver:(r,o)=>o.root})(({ownerState:r})=>x({boxSizing:"border-box",display:"inline-flex",alignItems:`var(--unstable_ListItemDecorator-alignItems, ${r.parentOrientation==="horizontal"?"center":"initial"})`},r.parentOrientation==="horizontal"?{minInlineSize:"var(--ListItemDecorator-size)",marginInlineEnd:"calc(-1 * var(--ListItem-gap))"}:{minBlockSize:"var(--ListItemDecorator-size)",justifyContent:"center",marginBlockEnd:"calc(-1 * var(--ListItem-gap))"})),U=u.forwardRef(function(o,p){const n=S({props:o,name:"JoyListItemDecorator"}),{component:h,className:i,children:a,slots:e={},slotProps:l={}}=n,s=A(n,W),m=u.useContext(B),c=x({parentOrientation:m},n),j=q(),_=x({},s,{component:h,slots:e,slotProps:l}),[g,y]=z("root",{ref:p,className:R(j.root,i),elementType:J,externalForwardedProps:_,ownerState:c});return t.jsx(g,x({},y,{children:a}))}),k=U;var f={},H=C;Object.defineProperty(f,"__esModule",{value:!0});var v=f.default=void 0,G=H(b()),K=t;v=f.default=(0,G.default)((0,K.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add");const w=O();function Q({user:r,onNewOptionAdded:o,setExistingClient:p}){const n=r.clients||[],[h,i]=u.useState(null);return t.jsxs(I,{className:d,children:[t.jsx("h4",{children:"Add or Create a New Client"}),t.jsx("p",{className:"text-sm",children:"Type their company name and the list will populate for existing clients. If they don't exist, you will have the option to add them"}),t.jsx(L,{onChange:(a,e)=>{if(typeof e=="string")p({title:e}),i({title:e});else if(e&&e.inputValue)o(e.inputValue);else if(e&&e.title&&e.title.startsWith('Add "')){const l=e.title.slice(5,-1);o(l),i({title:e.inputValue})}else p(e),i(e)},placeholder:"Create or choose an existing client",filterOptions:(a,e)=>{const l=w(a,e),{inputValue:s}=e,m=a.some(c=>s===c.title);return s!==""&&!m&&l.push({inputValue:s,title:`Add "${s}"`}),l},selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,freeSolo:!0,options:n,getOptionLabel:a=>typeof a=="string"?a:a.inputValue?a.inputValue:`${a.first_name} ${a.last_name}${a.companies?" - "+a.companies.map(e=>e.name).join(", "):""}`,renderOption:(a,e)=>{var l;return t.jsxs(D,{...a,children:[((l=e.title)==null?void 0:l.startsWith('Add "'))&&t.jsx(k,{children:t.jsx(v,{})}),e.inputValue?`Add "${e.inputValue}"`:`${e.first_name} ${e.last_name}${e.companies?" - Company: "+e.companies.map(s=>s.name).join(", "):""}`]})},sx:{width:300}})]})}function ge({onUpdateCompanyInfo:r,user:o,setExistingClient:p}){const[n,h]=u.useState(null),{data:i,setData:a}=N({first_name:"",last_name:"",middle_initial:"",job_title:"",email_address:"",tel:""}),e=(s,m)=>{a(c=>({...c,[s]:m})),r(c=>({...c,[s]:m,company_name:n}))},l=s=>{h(s),r(m=>({...m,company_name:s}))};return t.jsxs("div",{className:"new-project-form",children:[t.jsx("div",{className:"mb-8 form-group",children:t.jsx(Q,{user:o,onNewOptionAdded:l,setExistingClient:p})}),n&&t.jsxs("div",{className:"mb-8 form-group",children:[t.jsx("h3",{className:"mb-4 font-semibold primary-color",children:"Client Contact"}),t.jsxs("div",{className:"flex flex-row gap-2",children:[t.jsxs("div",{className:`grow ${d}`,children:[t.jsx("label",{htmlFor:"first_name",value:"first_name",className:"text-gray-400 text-sm",children:" First Name "}),t.jsx("input",{type:"text",placeholder:"First Name",name:"first_name",value:i.first_name,onChange:s=>e("first_name",s.target.value)})]}),t.jsxs("div",{className:d,children:[t.jsx("label",{htmlFor:"middle_initial",value:"middle_initial",className:"text-gray-400 text-sm",children:" Middle Initial "}),t.jsx("input",{type:"text",placeholder:"Middle Initial",name:"middle_initial",value:i.middle_initial,onChange:s=>e("middle_initial",s.target.value)})]}),t.jsxs("div",{className:d,children:[t.jsx("label",{htmlFor:"last_name",value:"last_name",className:"text-gray-400 text-sm",children:" Last Name "}),t.jsx("input",{type:"text",sx:{mb:2},placeholder:"Last Name",name:"last_name",value:i.last_name,onChange:s=>e("last_name",s.target.value)})]})]}),t.jsxs("div",{className:d,children:[t.jsx("label",{htmlFor:"job_title",value:"job_title",className:"text-gray-400 text-sm",children:" Last Name "}),t.jsx("input",{type:"text",placeholder:"Job Title",name:"job_title",value:i.job_title,onChange:s=>e("job_title",s.target.value)})]}),t.jsxs("div",{className:d,children:[t.jsx("label",{htmlFor:"email_address",value:"email_address",className:"text-gray-400 text-sm",children:" Email Address "}),t.jsx("input",{type:"email",sx:{mb:2},placeholder:"Email Address",name:"email_address",value:i.email_address,onChange:s=>e("email_address",s.target.value)})]}),t.jsxs("div",{className:d,children:[t.jsx("label",{htmlFor:"tel",value:"tel",className:"text-gray-400 text-sm",children:" Phone Number "}),t.jsx("input",{type:"tel",placeholder:"Phone Number",name:"tel",value:i.tel,onChange:s=>e("tel",s.target.value)})]})]})]})}export{ge as default};
