import{k as d,r as l,j as s}from"./app-d6201cb1.js";import{l as x}from"./lodash-d45ede16.js";import{C as h}from"./CardContainer-99e0037a.js";import{T as f}from"./Textarea-a202688a.js";import{T as g}from"./Typography-651ae2a6.js";import"./index.es-4ddfc134.js";import"./index-cbb8f8c7.js";import"./index-d825d59e.js";import"./toPropertyKey-0671445a.js";import"./useSlot-958e930c.js";import"./useForwardedInput-ffe731dd.js";import"./FormControlContext-906cd091.js";import"./ownerWindow-8eff4865.js";import"./useEnhancedEffect-8ef057d9.js";import"./extendSxProp-0a396769.js";import"./isMuiElement-2d2d89c3.js";function K({callSheet:a,isSave:p=!1}){const{setSnackContent:n,setIsSnackOpen:i}=d(),[o,u]=l.useState(a.bulletin||""),r=365,m=l.useCallback(x.debounce(async e=>{try{const t=await axios.put(route("projects.callSheets.update.bulletin",{id:a.project_id,callSheetId:a.id}),{bulletin:e});if(t.status<200||t.status>=300)throw new Error("Failed to update bulletin");setTimeout(()=>{n("Bulletin updated successfully"),i(!0)},600)}catch(t){console.error(t),n("Failed to update bulletin"),i(!1)}},600),[]),c=e=>{let t=e.target.value;t=t.replace(/\n/g,""),t.length>r&&(t=t.substring(0,r)),u(t),p&&m(t)};return s.jsx(h,{header:"Bulletin",children:s.jsx(f,{name:"bulletin",size:"sm",variant:"soft",minRows:4,maxRows:4,value:o,placeholder:"Type anythingâ€¦",className:"!bg-slate-100",maxLength:r,onChange:c,onKeyDown:e=>{e.key==="Enter"&&e.preventDefault()},endDecorator:s.jsxs(g,{level:"body-xs",sx:{ml:"auto"},children:[o.length," / ",r," character(s) (",r-o.length," remaining)"]})})})}export{K as default};
