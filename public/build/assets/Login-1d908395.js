import{j as e,r as o,d as p}from"./app-8b83436b.js";import{G as w}from"./GuestLayout-78c4bb2d.js";import{i as x}from"./Form-792c5f5e.js";import{P as y}from"./PrimaryButton-83478115.js";import{I as u}from"./Input-77ff0868.js";import"./CardContainer-da7ef859.js";import"./index.es-ee268f83.js";import"./index-3b70e7e7.js";import"./index-e6ab5b50.js";import"./ImageContainer-9e560b2e.js";import"./ApplicationName-e46a0827.js";import"./PrivacyPolicy-89a8be4e.js";import"./Modal-16f11f32.js";import"./Tooltip-1f0ef08d.js";import"./toPropertyKey-39201a13.js";import"./useSlot-a2532144.js";import"./useIsFocusVisible-97f68d26.js";import"./useControlled-9031fbe1.js";import"./useEventCallback-96e4a742.js";import"./useEnhancedEffect-99238f73.js";import"./Popper-794acb7d.js";function b({className:i="",...r}){return e.jsx("input",{...r,type:"checkbox",className:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500 "+i})}function U({canResetPassword:i}){const[r,l]=o.useState({email:"",password:"",remember:!1}),[t,m]=o.useState({}),[g,c]=o.useState(!1),d=a=>{const{name:s,value:n}=a.target;l({...r,[s]:n})},h=async a=>{a.preventDefault(),c(!0),m({});try{const s=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok){const j=await s.json();throw new Error(j.message||"Login failed. Please try again.")}const n=await s.json();localStorage.setItem("token",n.token),window.location.href="/dashboard"}catch(s){m({general:s.toString().includes("Failed to fetch")?"Network error, please try again later.":s.message})}finally{c(!1)}};o.useEffect(()=>()=>{l(a=>({...a,password:""}))},[]);const f=["Welcome",e.jsx("br",{},"linebreak"),"Back!"];return e.jsx(w,{greeting:f,imgUrl:"/images/background_images/bg_image_2.jpg",children:{body:e.jsxs("div",{className:"flex flex-col gap-4 h-full justify-between",children:[e.jsx("div",{className:"flex flex-col gap-8 items-center h-full",children:e.jsxs("div",{className:"w-full h-full flex flex-col gap-4",children:[e.jsxs("div",{className:x,children:[e.jsx("label",{htmlFor:"email",value:"email",className:"text-gray-400 text-sm",children:" Email Address * "}),e.jsx(u,{id:"email",title:"Email",type:"email",name:"email",placeholder:"indy@indianajones.com",value:r.email,autoComplete:"username",onChange:d,sx:{"--Input-focusedThickness":"1px","--Input-minHeight":"56px","--Input-paddingInline":"26px"}})]}),e.jsxs("div",{className:x,children:[e.jsx("label",{htmlFor:"password",value:"password",className:"text-gray-400 text-sm",children:" Password * "}),e.jsx(u,{id:"password",title:"Password",type:"password",name:"password",placeholder:"********",value:r.password,autoComplete:"current-password",onChange:d})]}),e.jsxs("div",{className:"text-left justify-between w-full flex flex-row gap-4",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx(b,{name:"remember",checked:r.remember,onChange:a=>l("remember",a.target.checked)}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Remember me"})]})}),i&&e.jsx("div",{className:"text-right secondary-color",children:e.jsx(p,{href:route("password.request"),className:"underline text-sm hover:primary-color rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Forgot your password?"})})]}),t.email&&e.jsx("div",{className:"text-red-600 text-center p-4 bg-red-50 rounded-xl mt-6",children:t.email})]})}),t.general&&e.jsx("div",{className:"text-red-600 text-center p-4 bg-red-50 rounded-xl my-4",children:t.general}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{children:e.jsx(y,{onClick:h,disabled:g,children:"Login"})}),e.jsx("div",{children:e.jsx(p,{href:route("register"),className:"text-sm secondary-color",children:"Don't have an account? Sign up!"})})]})]})}})}export{U as default};
